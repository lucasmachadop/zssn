  [1m[35m (130.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (108.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSurvivors (20161226132148)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar, "last_location_longitude" decimal, "last_location_latitude" decimal, "infected" boolean, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226132148"]]
  [1m[35m (105.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateResources (20161226133625)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateResources (20161226133625)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "resources" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "points" integer, "code" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226133625"]]
  [1m[35m (96.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateItems (20161226133648)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "items" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "resource_id" integer, "survivor_id" integer, "quantity" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_items_on_resource_id" ON "items" ("resource_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_resource_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_resource_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_items_on_survivor_id" ON "items" ("survivor_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226133648"]]
  [1m[35m (104.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "infection_reports" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "reporter_survivor_id" integer, "reported_survivor_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226134216"]]
  [1m[35m (106.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", 2016-12-26 14:03:14 UTC], ["updated_at", 2016-12-26 14:03:14 UTC]]
  [1m[35m (120.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_survivor_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_survivor_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_resource_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_resource_id' AND type='index'
[0m
Started GET "/" for 127.0.0.1 at 2016-12-26 12:03:35 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Rails::WelcomeController#index as HTML
  Parameters: {"internal"=>true}
  Rendering /home/hadutes/.rvm/gems/ruby-2.3.3@4/gems/railties-5.0.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/hadutes/.rvm/gems/ruby-2.3.3@4/gems/railties-5.0.1/lib/rails/templates/rails/welcome/index.html.erb (2.3ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2016-12-26 12:03:35 -0200
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started GET "/survivors" for 127.0.0.1 at 2016-12-26 12:03:41 -0200
Processing by SurvivorsController#index as HTML
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 200 OK in 9ms (Views: 2.1ms | ActiveRecord: 0.6ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-26 12:05:29 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0000", "infected"=>false}}
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "lucas"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:7fe05875e438,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:7fe05875e370,'0.2E1',9(18)>], ["infected", false], ["created_at", 2016-12-26 14:05:29 UTC], ["updated_at", 2016-12-26 14:05:29 UTC]]
  [1m[35m (141.9ms)[0m  [1m[36mcommit transaction[0m
Completed 201 Created in 151ms (Views: 1.0ms | ActiveRecord: 142.9ms)


Started GET "/survivors" for 127.0.0.1 at 2016-12-26 12:05:33 -0200
Processing by SurvivorsController#index as HTML
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.1ms)


Started POST "/survivors/1" for 127.0.0.1 at 2016-12-26 12:06:01 -0200
  
ActionController::RoutingError (No route matches [POST] "/survivors/1"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/1" for 127.0.0.1 at 2016-12-26 12:06:31 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"lucas", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false}, "id"=>"1"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_latitude" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["last_location_latitude", #<BigDecimal:7fe058538dc0,'0.20005E1',18(18)>], ["updated_at", 2016-12-26 14:06:31 UTC], ["id", 1]]
  [1m[35m (152.0ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 162ms (Views: 0.4ms | ActiveRecord: 153.2ms)


Started GET "/survivors" for 127.0.0.1 at 2016-12-26 12:06:35 -0200
Processing by SurvivorsController#index as HTML
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.2ms)


Started GET "/survivors" for 127.0.0.1 at 2016-12-26 14:18:19 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as HTML
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 200 OK in 17ms (Views: 10.3ms | ActiveRecord: 0.5ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:19:28 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameter: items
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/survivors_controller.rb:21:in `[]'
app/controllers/survivors_controller.rb:21:in `block in create'
app/controllers/survivors_controller.rb:20:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:21:19 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.4ms)


  
ActiveRecord::AssociationTypeMismatch (Item(#70200305281420) expected, got Array(#14065720)):
  
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:22:58 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.4ms)


  
ActiveRecord::AssociationTypeMismatch (Item(#69924756274780) expected, got Array(#12361800)):
  
app/controllers/survivors_controller.rb:19:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:25:28 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Completed 500 Internal Server Error in 358340ms (ActiveRecord: 8.0ms)


  
ActiveRecord::AssociationTypeMismatch (Item(#70042731451440) expected, got Array(#5029960)):
  
app/controllers/survivors_controller.rb:19:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:31:39 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Completed 500 Internal Server Error in 6076ms (ActiveRecord: 0.0ms)


  
ActiveRecord::AssociationTypeMismatch (Item(#70042731451440) expected, got Array(#5029960)):
  
app/controllers/survivors_controller.rb:19:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:32:22 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Completed 500 Internal Server Error in 20267ms (ActiveRecord: 4.8ms)


  
ActiveRecord::AssociationTypeMismatch (Item(#20843100) expected, got Array(#7364680)):
  
app/controllers/survivors_controller.rb:19:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:33:40 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Completed 500 Internal Server Error in 4501ms (ActiveRecord: 0.0ms)


  
ActiveRecord::AssociationTypeMismatch (Item(#20843100) expected, got Array(#7364680)):
  
app/controllers/survivors_controller.rb:19:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:33:54 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Completed 500 Internal Server Error in 39950ms (ActiveRecord: 0.0ms)


  
ActiveRecord::AssociationTypeMismatch (Item(#20843100) expected, got Array(#7364680)):
  
app/controllers/survivors_controller.rb:19:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:36:14 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameter: items
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
Completed 500 Internal Server Error in 8436ms (ActiveRecord: 0.5ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/survivors_controller.rb:22:in `[]'
app/controllers/survivors_controller.rb:22:in `block in create'
app/controllers/survivors_controller.rb:21:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:38:29 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameter: items
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
Completed 500 Internal Server Error in 640977ms (ActiveRecord: 0.4ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/survivors_controller.rb:23:in `[]'
app/controllers/survivors_controller.rb:23:in `block in create'
app/controllers/survivors_controller.rb:21:in `create'
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:49:21 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameter: items
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "lucas2"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:38bc088,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:38bc998,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 16:50:45 UTC], ["updated_at", 2016-12-26 16:50:45 UTC]]
  [1m[35m (98.8ms)[0m  [1m[36mcommit transaction[0m
Completed 201 Created in 83846ms (Views: 2.9ms | ActiveRecord: 99.5ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-26 14:51:54 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameter: items
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["name", "lucas2"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:4502ec8,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:4502d60,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 16:52:07 UTC], ["updated_at", 2016-12-26 16:52:07 UTC]]
  [1m[35m (120.6ms)[0m  [1m[36mcommit transaction[0m
Completed 201 Created in 13081ms (Views: 1.1ms | ActiveRecord: 121.3ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "resources" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "{\"water\"=>1, \"food\"=>2, \"medication\"=>3, \"ammunation\"=>4}"], ["created_at", 2016-12-26 17:12:12 UTC], ["updated_at", 2016-12-26 17:12:12 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226170822"]]
  [1m[35m (109.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_survivor_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_survivor_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_resource_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_resource_id' AND type='index'
[0m
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT "resources".* FROM "resources"[0m
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "resources" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "{\"water\"=>1, \"food\"=>2, \"medication\"=>3, \"ammunation\"=>4}"], ["created_at", 2016-12-26 17:15:04 UTC], ["updated_at", 2016-12-26 17:15:04 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20161226170822"]]
  [1m[35m (117.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_survivor_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_survivor_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_resource_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_resource_id' AND type='index'
[0m
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT "resources".* FROM "resources"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "infection_reports"[0m
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20161226134216"]]
  [1m[35m (162.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_survivor_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_survivor_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_resource_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_resource_id' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "infection_reports" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "reporter_survivor_id" integer, "reported_survivor_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226134216"]]
  [1m[35m (124.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "{\"water\"=>1, \"food\"=>2, \"medication\"=>3, \"ammunation\"=>4}"], ["created_at", 2016-12-26 17:17:06 UTC], ["updated_at", 2016-12-26 17:17:06 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20161226170822"]]
  [1m[35m (121.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_survivor_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_survivor_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_items_on_resource_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_items_on_resource_id' AND type='index'
[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT "resources".* FROM "resources"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "zssn_dev"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "zssn_test"[0m
  [1m[35m (884.8ms)[0m  [1m[35mCREATE DATABASE "zssn_dev" ENCODING = 'unicode'[0m
  [1m[35m (486.6ms)[0m  [1m[35mCREATE DATABASE "zssn_test" ENCODING = 'unicode'[0m
  [1m[35m (118.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying PRIMARY KEY)[0m
  [1m[35m (146.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSurvivors (20161226132148)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (171.1ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" serial primary key, "name" character varying, "age" integer, "gender" character varying, "last_location_longitude" decimal, "last_location_latitude" decimal, "infected" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226132148"]]
  [1m[35m (38.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateResources (20161226133625)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (123.8ms)[0m  [1m[35mCREATE TABLE "resources" ("id" serial primary key, "name" character varying, "points" integer, "code" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226133625"]]
  [1m[35m (15.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateItems (20161226133648)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (34.8ms)[0m  [1m[35mCREATE TABLE "items" ("id" serial primary key, "resource_id" integer, "survivor_id" integer, "quantity" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_a57f853ade"
FOREIGN KEY ("resource_id")
  REFERENCES "resources" ("id")
, CONSTRAINT "fk_rails_27c1602cf3"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  [1m[35m (31.6ms)[0m  [1m[35mCREATE  INDEX  "index_items_on_resource_id" ON "items"  ("resource_id")[0m
  [1m[35m (32.4ms)[0m  [1m[35mCREATE  INDEX  "index_items_on_survivor_id" ON "items"  ("survivor_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226133648"]]
  [1m[35m (14.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (48.9ms)[0m  [1m[35mCREATE TABLE "infection_reports" ("id" serial primary key, "reporter_survivor_id" integer, "reported_survivor_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226134216"]]
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "{\"water\"=>1, \"food\"=>2, \"medication\"=>3, \"ammunation\"=>4}"], ["created_at", 2016-12-26 17:25:10 UTC], ["updated_at", 2016-12-26 17:25:10 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", 2016-12-26 17:25:10 UTC], ["updated_at", 2016-12-26 17:25:10 UTC]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "{:water=>1, :food=>2, :medication=>3, :ammunation=>4}"], ["created_at", 2016-12-26 17:31:24 UTC], ["updated_at", 2016-12-26 17:31:24 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20161226170822"]]
  [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "infection_reports"[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20161226134216"]]
  [1m[35m (14.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (32.7ms)[0m  [1m[35mCREATE TABLE "infection_reports" ("id" serial primary key, "reporter_survivor_id" integer, "reported_survivor_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226134216"]]
  [1m[35m (18.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "{:water=>1, :food=>2, :medication=>3, :ammunation=>4}"], ["created_at", 2016-12-26 17:31:50 UTC], ["updated_at", 2016-12-26 17:31:50 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (38.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["name", "{:water=>1, :food=>2, :medication=>3, :ammunation=>4}"], ["created_at", 2016-12-26 17:32:05 UTC], ["updated_at", 2016-12-26 17:32:05 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20161226170822"]]
  [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 1], ["code", 1], ["created_at", 2016-12-26 17:33:08 UTC], ["updated_at", 2016-12-26 17:33:08 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 2], ["code", 2], ["created_at", 2016-12-26 17:33:08 UTC], ["updated_at", 2016-12-26 17:33:08 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 3], ["code", 3], ["created_at", 2016-12-26 17:33:08 UTC], ["updated_at", 2016-12-26 17:33:08 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 4], ["code", 4], ["created_at", 2016-12-26 17:33:08 UTC], ["updated_at", 2016-12-26 17:33:08 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (11.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2016-12-26 17:33:49 UTC], ["updated_at", 2016-12-26 17:33:49 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2016-12-26 17:33:49 UTC], ["updated_at", 2016-12-26 17:33:49 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2016-12-26 17:33:49 UTC], ["updated_at", 2016-12-26 17:33:49 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2016-12-26 17:33:49 UTC], ["updated_at", 2016-12-26 17:33:49 UTC]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20161226170822"]]
  [1m[35m (10.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2016-12-26 17:33:52 UTC], ["updated_at", 2016-12-26 17:33:52 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2016-12-26 17:33:52 UTC], ["updated_at", 2016-12-26 17:33:52 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2016-12-26 17:33:52 UTC], ["updated_at", 2016-12-26 17:33:52 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2016-12-26 17:33:52 UTC], ["updated_at", 2016-12-26 17:33:52 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2016-12-26 17:34:10 UTC], ["updated_at", 2016-12-26 17:34:10 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2016-12-26 17:34:10 UTC], ["updated_at", 2016-12-26 17:34:10 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2016-12-26 17:34:10 UTC], ["updated_at", 2016-12-26 17:34:10 UTC]]
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2016-12-26 17:34:10 UTC], ["updated_at", 2016-12-26 17:34:10 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20161226170822"]]
  [1m[35m (10.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2016-12-26 17:35:10 UTC], ["updated_at", 2016-12-26 17:35:10 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2016-12-26 17:35:10 UTC], ["updated_at", 2016-12-26 17:35:10 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2016-12-26 17:35:10 UTC], ["updated_at", 2016-12-26 17:35:10 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2016-12-26 17:35:10 UTC], ["updated_at", 2016-12-26 17:35:10 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "resources"[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20161226170822"]]
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2016-12-26 17:35:22 UTC], ["updated_at", 2016-12-26 17:35:22 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2016-12-26 17:35:22 UTC], ["updated_at", 2016-12-26 17:35:22 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2016-12-26 17:35:22 UTC], ["updated_at", 2016-12-26 17:35:22 UTC]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2016-12-26 17:35:22 UTC], ["updated_at", 2016-12-26 17:35:22 UTC]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (14.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[31mDELETE FROM "resources"[0m
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20161226170822"]]
  [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2016-12-26 17:35:32 UTC], ["updated_at", 2016-12-26 17:35:32 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2016-12-26 17:35:32 UTC], ["updated_at", 2016-12-26 17:35:32 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2016-12-26 17:35:32 UTC], ["updated_at", 2016-12-26 17:35:32 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2016-12-26 17:35:32 UTC], ["updated_at", 2016-12-26 17:35:32 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 15:42:57 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas2", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameter: items
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucas2"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:41fc378,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:41fc2b0,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 17:42:57 UTC], ["updated_at", 2016-12-26 17:42:57 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 29], ["survivor_id", 1], ["quantity", 4], ["created_at", 2016-12-26 17:42:57 UTC], ["updated_at", 2016-12-26 17:42:57 UTC]]
  [1m[35m (14.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 63ms (Views: 0.9ms | ActiveRecord: 24.4ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-26 15:44:07 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucrecia3", "age"=>"26", "gender"=>"F", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"food"=>"5", "ammunation"=>2}}}
Unpermitted parameter: items
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucrecia3"], ["age", 26], ["gender", "F"], ["last_location_longitude", #<BigDecimal:40f8710,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:40f8670,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 17:44:07 UTC], ["updated_at", 2016-12-26 17:44:07 UTC]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 30], ["survivor_id", 2], ["quantity", 5], ["created_at", 2016-12-26 17:44:07 UTC], ["updated_at", 2016-12-26 17:44:07 UTC]]
  [1m[35m (35.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 32], ["survivor_id", 2], ["quantity", 2], ["created_at", 2016-12-26 17:44:07 UTC], ["updated_at", 2016-12-26 17:44:07 UTC]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 56ms (Views: 0.6ms | ActiveRecord: 44.6ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-26 15:46:37 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucrecia4", "age"=>"26", "gender"=>"F", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"food"=>"5", "gold"=>3, "ammunation"=>2}}}
Unpermitted parameter: items
Unpermitted parameter: gold
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucrecia4"], ["age", 26], ["gender", "F"], ["last_location_longitude", #<BigDecimal:404a4a8,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:404a408,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 17:46:37 UTC], ["updated_at", 2016-12-26 17:46:37 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 30], ["survivor_id", 3], ["quantity", 5], ["created_at", 2016-12-26 17:46:37 UTC], ["updated_at", 2016-12-26 17:46:37 UTC]]
  [1m[35m (26.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 32], ["survivor_id", 3], ["quantity", 2], ["created_at", 2016-12-26 17:46:37 UTC], ["updated_at", 2016-12-26 17:46:37 UTC]]
  [1m[35m (38.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 74ms (Views: 0.5ms | ActiveRecord: 66.7ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-26 15:49:03 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucrecia8", "age"=>"26", "gender"=>"F", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"food"=>"5", "gold"=>3, "medication"=>10}}}
Unpermitted parameter: items
Unpermitted parameter: gold
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucrecia8"], ["age", 26], ["gender", "F"], ["last_location_longitude", #<BigDecimal:7f67d0038bc8,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:7f67d0038b28,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 17:49:03 UTC], ["updated_at", 2016-12-26 17:49:03 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 30], ["survivor_id", 4], ["quantity", 5], ["created_at", 2016-12-26 17:49:03 UTC], ["updated_at", 2016-12-26 17:49:03 UTC]]
  [1m[35m (45.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 31], ["survivor_id", 4], ["quantity", 10], ["created_at", 2016-12-26 17:49:03 UTC], ["updated_at", 2016-12-26 17:49:03 UTC]]
  [1m[35m (38.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 93ms (Views: 0.5ms | ActiveRecord: 86.2ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-26 15:49:54 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucrecia15", "age"=>"26", "blood-type"=>"AB", "gender"=>"F", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"food"=>"5", "gold"=>3, "medication"=>10}}}
Unpermitted parameters: blood-type, items
Unpermitted parameter: gold
Unpermitted parameters: name, age, blood-type, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucrecia15"], ["age", 26], ["gender", "F"], ["last_location_longitude", #<BigDecimal:3f653f8,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:3f65358,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 17:49:54 UTC], ["updated_at", 2016-12-26 17:49:54 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 30], ["survivor_id", 5], ["quantity", 5], ["created_at", 2016-12-26 17:49:54 UTC], ["updated_at", 2016-12-26 17:49:54 UTC]]
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 31], ["survivor_id", 5], ["quantity", 10], ["created_at", 2016-12-26 17:49:54 UTC], ["updated_at", 2016-12-26 17:49:54 UTC]]
  [1m[35m (51.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 76ms (Views: 0.5ms | ActiveRecord: 66.0ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-26 15:57:05 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucreuza", "age"=>"26", "blood-type"=>"AB", "gender"=>"F", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"food"=>"5", "gold"=>3, "medication"=>10}}}
Unpermitted parameters: blood-type, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucreuza"], ["age", 26], ["gender", "F"], ["last_location_longitude", #<BigDecimal:7fe798308ba8,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:7fe798308ae0,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 17:57:05 UTC], ["updated_at", 2016-12-26 17:57:05 UTC]]
  [1m[35m (295.1ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameter: gold
Unpermitted parameters: name, age, blood-type, gender, last_location_longitude, last_location_latitude, infected
Unpermitted parameter: gold
Unpermitted parameters: name, age, blood-type, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 30], ["survivor_id", 6], ["quantity", 5], ["created_at", 2016-12-26 18:00:30 UTC], ["updated_at", 2016-12-26 18:00:30 UTC]]
  [1m[35m (13.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 31], ["survivor_id", 6], ["quantity", 10], ["created_at", 2016-12-26 18:00:31 UTC], ["updated_at", 2016-12-26 18:00:31 UTC]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 205224ms (Views: 1.1ms | ActiveRecord: 323.0ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "resources"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
Started POST "/survivors" for 127.0.0.1 at 2016-12-26 16:15:38 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"kamui", "age"=>"26", "blood-type"=>"AB", "gender"=>"F", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"food"=>"5", "gold"=>3, "medication"=>10, "ammunation"=>5}}}
Unpermitted parameters: blood-type, items
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "infected", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "kamui"], ["age", 26], ["gender", "F"], ["last_location_longitude", #<BigDecimal:7f89003331d8,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:7f8900333110,'0.20005E1',18(18)>], ["infected", false], ["created_at", 2016-12-26 18:15:38 UTC], ["updated_at", 2016-12-26 18:15:38 UTC]]
  [1m[35m (14.2ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameter: gold
Unpermitted parameters: name, age, blood-type, gender, last_location_longitude, last_location_latitude, infected
Unpermitted parameter: gold
Unpermitted parameters: name, age, blood-type, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 30], ["survivor_id", 7], ["quantity", 5], ["created_at", 2016-12-26 18:17:21 UTC], ["updated_at", 2016-12-26 18:17:21 UTC]]
  [1m[35m (15.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 32], ["survivor_id", 7], ["quantity", 5], ["created_at", 2016-12-26 18:17:21 UTC], ["updated_at", 2016-12-26 18:17:21 UTC]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 31], ["survivor_id", 7], ["quantity", 10], ["created_at", 2016-12-26 18:17:21 UTC], ["updated_at", 2016-12-26 18:17:21 UTC]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 102775ms (Views: 1.6ms | ActiveRecord: 50.6ms)


Started GET "/survivors/7" for 127.0.0.1 at 2016-12-26 16:19:04 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"7", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
Completed 200 OK in 11ms (Views: 1.0ms | ActiveRecord: 3.3ms)


Started DELETE "/survivors/7" for 127.0.0.1 at 2016-12-26 16:19:26 -0200
Processing by SurvivorsController#destroy as */*
  Parameters: {"survivor"=>{"name"=>"kamui", "age"=>"26", "blood-type"=>"AB", "gender"=>"F", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"food"=>"5", "gold"=>3, "medication"=>10, "ammunation"=>5}}, "id"=>"7"}
  [1m[36mSurvivor Load (2.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 7]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 12]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 14]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "survivors" WHERE "survivors"."id" = $1[0m  [["id", 7]]
  [1m[35m (16.7ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 79ms (ActiveRecord: 25.9ms)


Started PUT "/survivors/last_location/7" for 127.0.0.1 at 2016-12-26 17:01:41 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
ActionController::RoutingError (No route matches [PUT] "/survivors/last_location/7"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started GET "/survivors/show/7" for 127.0.0.1 at 2016-12-26 17:02:09 -0200
  
ActionController::RoutingError (No route matches [GET] "/survivors/show/7"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started GET "/survivor/show/7" for 127.0.0.1 at 2016-12-26 17:02:15 -0200
  
ActionController::RoutingError (No route matches [GET] "/survivor/show/7"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started GET "/survivors/7" for 127.0.0.1 at 2016-12-26 17:02:24 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"7", "survivor"=>{}}
  [1m[36mSurvivor Load (1.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
Completed 404 Not Found in 11ms (ActiveRecord: 6.1ms)


  
ActiveRecord::RecordNotFound (Couldn't find Survivor with 'id'=7):
  
app/controllers/survivors_controller.rb:56:in `set_survivor'
Started GET "/survivors/7" for 127.0.0.1 at 2016-12-26 17:02:25 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"7", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms)


  
ActiveRecord::RecordNotFound (Couldn't find Survivor with 'id'=7):
  
app/controllers/survivors_controller.rb:56:in `set_survivor'
Started GET "/survivors/1" for 127.0.0.1 at 2016-12-26 17:02:29 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 0.5ms)


Started PUT "/survivors/last_location/1" for 127.0.0.1 at 2016-12-26 17:02:39 -0200
  
ActionController::RoutingError (No route matches [PUT] "/survivors/last_location/1"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/last_location/1" for 127.0.0.1 at 2016-12-26 17:06:54 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
ActionController::RoutingError (No route matches [PUT] "/survivors/last_location/1"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/last_location/1" for 127.0.0.1 at 2016-12-26 17:08:39 -0200
  
ActionController::RoutingError (No route matches [PUT] "/survivors/last_location/1"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:09:00 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 14ms (Views: 0.5ms | ActiveRecord: 3.1ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:09:01 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 1.0ms | ActiveRecord: 0.5ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:09:01 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.2ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:09:02 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:17:11 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"survivors"=>{"latitude"=>-1.09, "longitude"=>2.333401}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 400 Bad Request in 8ms (ActiveRecord: 2.7ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:72:in `last_location_params'
app/controllers/survivors_controller.rb:17:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:17:39 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"survivor"=>{"latitude"=>-1.09, "longitude"=>2.333401}, "id"=>"1"}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_longitude" = $1, "last_location_latitude" = $2, "updated_at" = $3 WHERE "survivors"."id" = $4[0m  [["last_location_longitude", #<BigDecimal:32a8a98,'0.2333401E1',18(36)>], ["last_location_latitude", #<BigDecimal:32a8778,'-0.109E1',18(36)>], ["updated_at", 2016-12-26 19:17:39 UTC], ["id", 1]]
  [1m[35m (35.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 41ms (Views: 0.5ms | ActiveRecord: 36.3ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:18:38 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"survivor"=>{"latitude"=>-1.09001, "longitude"=>2.333401}, "id"=>"1"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_latitude" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["last_location_latitude", #<BigDecimal:31fe4d0,'-0.109001E1',18(36)>], ["updated_at", 2016-12-26 19:18:38 UTC], ["id", 1]]
  [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 16ms (Views: 0.5ms | ActiveRecord: 12.2ms)


Started PATCH "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:19:24 -0200
  
ActionController::RoutingError (No route matches [PATCH] "/survivors/1/last_location"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PATCH "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:27:32 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"survivor"=>{"latitude"=>-1.090015, "longitude"=>2.333401}, "id"=>"1"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_latitude" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["last_location_latitude", #<BigDecimal:7fc738271f58,'-0.1090015E1',18(36)>], ["updated_at", 2016-12-26 19:27:33 UTC], ["id", 1]]
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 30ms (Views: 0.5ms | ActiveRecord: 14.7ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:27:47 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"survivor"=>{"latitude"=>-3.090015, "longitude"=>2.333401}, "id"=>"1"}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_latitude" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["last_location_latitude", #<BigDecimal:7fc7381baa88,'-0.3090015E1',18(36)>], ["updated_at", 2016-12-26 19:27:47 UTC], ["id", 1]]
  [1m[35m (32.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 40ms (Views: 0.4ms | ActiveRecord: 35.0ms)


Started POST "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:28:03 -0200
  
ActionController::RoutingError (No route matches [POST] "/survivors/1/last_location"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:35:31 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"survivor"=>{"latitude"=>-3.090015, "longitude"=>2.333401}, "id"=>"1"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 15ms (ActiveRecord: 4.7ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:35:40 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090015, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.5ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:35:40 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090015, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.2ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:35:40 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090015, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.7ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:35:41 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090015, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.4ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:35:41 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090015, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.3ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:35:41 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090015, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.8ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:37:05 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090015, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.6ms)


  
NoMethodError (private method `require' called for 2.333401:Float):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:43:10 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090015, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
Unpermitted parameters: id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 3.3ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:43:19 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
Unpermitted parameters: id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_latitude" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["last_location_latitude", #<BigDecimal:4ede0c8,'-0.3090014E1',18(36)>], ["updated_at", 2016-12-26 19:43:20 UTC], ["id", 1]]
  [1m[35m (43.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 49ms (Views: 0.5ms | ActiveRecord: 44.3ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:43:43 -0200
Error occurred while parsing request parameters.
Contents:

{

"latitude":-3.090014,
"longitude":2.333401
,farofa:3
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{

"latitude":-3.090014,
"longitude":2.333401
,farofa:3
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:43:50 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:44:00 -0200
Error occurred while parsing request parameters.
Contents:

{

"latitude":-3.090014,

,"farofa":3
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{

"latitude":-3.090014,

,"farofa":3
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:44:08 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_longitude" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["last_location_longitude", nil], ["updated_at", 2016-12-26 19:44:08 UTC], ["id", 1]]
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 21ms (Views: 1.1ms | ActiveRecord: 16.5ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:45:05 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 400 Bad Request in 11ms (ActiveRecord: 2.8ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: longitude):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:45:18 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms)


  
NoMethodError (private method `require' called for 2.333401:Float):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:48:25 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 15ms (ActiveRecord: 3.1ms)


  
NoMethodError (private method `require' called for 2.333401:Float):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:48:26 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.5ms)


  
NoMethodError (private method `require' called for 2.333401:Float):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:48:27 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms)


  
NoMethodError (private method `require' called for 2.333401:Float):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:48:27 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.4ms)


  
NoMethodError (private method `require' called for 2.333401:Float):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:48:27 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms)


  
NoMethodError (private method `require' called for 2.333401:Float):
  
app/controllers/survivors_controller.rb:81:in `last_location_params'
app/controllers/survivors_controller.rb:24:in `last_location'
Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:48:56 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>2.333401, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_longitude" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["last_location_longitude", #<BigDecimal:7fb5fc284290,'0.2333401E1',18(36)>], ["updated_at", 2016-12-26 19:48:56 UTC], ["id", 1]]
  [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 26ms (Views: 0.5ms | ActiveRecord: 14.3ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:49:00 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (1.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_longitude" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["last_location_longitude", nil], ["updated_at", 2016-12-26 19:49:00 UTC], ["id", 1]]
  [1m[35m (31.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 38ms (Views: 0.5ms | ActiveRecord: 33.3ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:50:47 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 37ms (Views: 0.7ms | ActiveRecord: 3.0ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:50:51 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (2.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 2.3ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:51:14 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>-1.090014, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_longitude" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["last_location_longitude", #<BigDecimal:7fa49011d4d8,'-0.1090014E1',18(36)>], ["updated_at", 2016-12-26 19:51:15 UTC], ["id", 1]]
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 14ms (Views: 1.7ms | ActiveRecord: 7.9ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:51:16 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "longitude"=>-1.090014, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.8ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-26 17:51:22 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-3.090014, "farofa"=>3, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: farofa, id, survivor
Unpermitted parameters: farofa, id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.6ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2016-12-26 17:52:11 -0200
Error occurred while parsing request parameters.
Contents:

{

:infected:1
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{

:infected:1
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2016-12-26 17:52:20 -0200
Error occurred while parsing request parameters.
Contents:

{

:infected:"1"
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{

:infected:"1"
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2016-12-26 17:52:59 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>"1", "id"=>"1", "survivor"=>{"infected"=>"1"}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 42ms (ActiveRecord: 5.4ms)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `infection_report_id`):
  
app/controllers/survivors_controller.rb:18:in `report_infection'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2016-12-26 17:54:21 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>"1", "id"=>"1", "survivor"=>{"infected"=>"1"}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 23ms (ActiveRecord: 7.2ms)


  
ActiveRecord::AssociationTypeMismatch (Survivor(#69956967166440) expected, got Fixnum(#6112300)):
  
app/controllers/survivors_controller.rb:18:in `report_infection'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2016-12-27 13:42:35 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>"1", "id"=>"1", "survivor"=>{"infected"=>"1"}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 16ms (ActiveRecord: 3.5ms)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `infection_report_id`):
  
app/controllers/survivors_controller.rb:18:in `report_infection'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2016-12-27 13:42:36 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>"1", "id"=>"1", "survivor"=>{"infected"=>"1"}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.8ms)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `infection_report_id`):
  
app/controllers/survivors_controller.rb:18:in `report_infection'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2016-12-27 13:45:38 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>"1", "id"=>"1", "survivor"=>{"infected"=>"1"}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2016-12-27 14:18:00 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>"1", "id"=>"1", "survivor"=>{"infected"=>"1"}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 1], ["created_at", 2016-12-27 16:18:14 UTC], ["updated_at", 2016-12-27 16:18:14 UTC]]
  [1m[35m (25.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 13978ms (Views: 0.5ms | ActiveRecord: 30.9ms)


Started PUT "/survivors/1/last_location" for 127.0.0.1 at 2016-12-27 14:20:11 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-1.0, "longitude"=>2.00003, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
Unpermitted parameters: id, survivor
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.8ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_longitude" = $1, "last_location_latitude" = $2, "updated_at" = $3 WHERE "survivors"."id" = $4[0m  [["last_location_longitude", #<BigDecimal:28a4650,'0.200003E1',18(36)>], ["last_location_latitude", #<BigDecimal:28a4c18,'-0.1E1',9(36)>], ["updated_at", 2016-12-27 16:20:11 UTC], ["id", 1]]
  [1m[35m (32.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 41ms (Views: 0.5ms | ActiveRecord: 34.9ms)


Started PUT "/survivors/4/last_location" for 127.0.0.1 at 2016-12-27 14:20:19 -0200
Processing by SurvivorsController#last_location as */*
  Parameters: {"latitude"=>-1.0, "longitude"=>2.00003, "id"=>"4", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
Unpermitted parameters: id, survivor
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "survivors" SET "last_location_longitude" = $1, "last_location_latitude" = $2, "updated_at" = $3 WHERE "survivors"."id" = $4[0m  [["last_location_longitude", #<BigDecimal:28fc5a8,'0.200003E1',18(36)>], ["last_location_latitude", #<BigDecimal:28fdde0,'-0.1E1',9(36)>], ["updated_at", 2016-12-27 16:20:19 UTC], ["id", 4]]
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 17ms (Views: 0.5ms | ActiveRecord: 13.4ms)


Started GET "/survivors" for 127.0.0.1 at 2016-12-27 17:27:08 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:16: syntax error, unexpected '\n', expecting '='
/home/hadutes/zssn/app/models/survivor.rb:35: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/survivor.rb:16: syntax error, unexpected '\n', expecting '='
app/models/survivor.rb:35: syntax error, unexpected end-of-input, expecting keyword_end
app/controllers/survivors_controller.rb:6:in `index'
Started GET "/survivors" for 127.0.0.1 at 2016-12-27 17:28:38 -0200
Processing by SurvivorsController#index as HTML
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:16: syntax error, unexpected '\n', expecting '='
/home/hadutes/zssn/app/models/survivor.rb:35: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/survivor.rb:16: syntax error, unexpected '\n', expecting '='
app/models/survivor.rb:35: syntax error, unexpected end-of-input, expecting keyword_end
app/controllers/survivors_controller.rb:6:in `index'
Started GET "/survivors" for 127.0.0.1 at 2016-12-27 17:28:41 -0200
Processing by SurvivorsController#index as */*
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:16: syntax error, unexpected '\n', expecting '='
/home/hadutes/zssn/app/models/survivor.rb:35: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/survivor.rb:16: syntax error, unexpected '\n', expecting '='
app/models/survivor.rb:35: syntax error, unexpected end-of-input, expecting keyword_end
app/controllers/survivors_controller.rb:6:in `index'
Started GET "/survivors" for 127.0.0.1 at 2016-12-27 17:29:58 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 200 OK in 14ms (Views: 6.8ms | ActiveRecord: 3.1ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-27 17:32:20 -0200
  
ActionController::RoutingError (No route matches [POST] "/survivors/3/trade"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-27 17:50:24 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 14ms (ActiveRecord: 2.7ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/survivors_controller.rb:17:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-27 17:51:03 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 344885ms (ActiveRecord: 2.6ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-27 17:56:54 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 30621ms (ActiveRecord: 3.3ms)


  
NoMethodError (undefined method `survivor' for #<Survivor:0x007f7738284f40>):
  
app/models/survivor.rb:21:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:10:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:19:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-27 17:58:15 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
Completed 500 Internal Server Error in 6183ms (ActiveRecord: 3.5ms)


  
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x00000002b92948>):
  
app/models/survivor.rb:22:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:10:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:19:in `trade'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-27 17:59:32 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.9ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
Completed 500 Internal Server Error in 7932ms (ActiveRecord: 3.6ms)


  
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x00000004042500>):
  
app/models/survivor.rb:22:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:10:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-27 17:59:58 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
Completed 500 Internal Server Error in 93202ms (ActiveRecord: 3.5ms)


  
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x007f3bb01bce28>):
  
app/models/survivor.rb:22:in `block in trade'
app/models/survivor.rb:19:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
  [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE (resource.name = 'food' and survivor = 3)[0m
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:07:32 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
Completed 500 Internal Server Error in 24295ms (ActiveRecord: 3.9ms)


  
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x007fe6d81e1ab0>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:07:59 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
Completed 500 Internal Server Error in 3299ms (ActiveRecord: 1.4ms)


  
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x007fe6d8609598>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:08:06 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (1.2ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
Completed 500 Internal Server Error in 93303ms (ActiveRecord: 2.6ms)


  
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x00000004777258>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource.name = 'food' and survivor = 3)[0m
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:10:33 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor = 3)[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (2.1ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor = 3)[0m
Completed 500 Internal Server Error in 87463ms (ActiveRecord: 5.0ms)


  
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor = 3)[0m
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x007f83141bd890>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor = 3)[0m
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:12:11 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3)[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3)[0m
  [1m[36mItem Load (1.2ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3)[0m
Completed 500 Internal Server Error in 78609ms (ActiveRecord: 9.1ms)


  
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x000000054ba2f8>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:13:54 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3)[0m
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 47214ms (ActiveRecord: 7.3ms)


  
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x007ff15c29b990>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:23:17 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3)[0m
Completed 500 Internal Server Error in 192490ms (ActiveRecord: 5.3ms)


  
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x007fbca81eedf0>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:26:39 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3)[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 140156ms (ActiveRecord: 6.1ms)


  
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x007f65701bbac0>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 15:54:53 -0200
  [1m[36mActiveRecord::SchemaMigration Load (24.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (69.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (56.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3)[0m
Completed 500 Internal Server Error in 629345ms (ActiveRecord: 184.2ms)


  
NoMethodError (undefined method `quantity' for #<Item::ActiveRecord_Relation:0x007f64ac201008>):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:20:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:05:59 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (9.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-28 18:06:03 UTC], ["id", 4]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 4068ms (ActiveRecord: 17.7ms)


  
NoMethodError (undefined method `quantity' for nil:NilClass):
  
app/models/survivor.rb:30:in `block in trade'
app/models/survivor.rb:28:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:06:40 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-28 18:09:43 UTC], ["id", 4]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 183187ms (ActiveRecord: 3.2ms)


  
NoMethodError (undefined method `quantity' for nil:NilClass):
  
app/models/survivor.rb:30:in `block in trade'
app/models/survivor.rb:28:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:09:52 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-28 18:09:52 UTC], ["id", 4]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 3)[0m
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 575313ms (ActiveRecord: 8.5ms)


  
NoMethodError (undefined method `quantity' for nil:NilClass):
  
app/models/survivor.rb:31:in `block in trade'
app/models/survivor.rb:28:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:19:36 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:23: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
			unless currentItem 	raise %{u trying to give items u don't have}	
			                   	                ^
/home/hadutes/zssn/app/models/survivor.rb:31: syntax error, unexpected tIDENTIFIER, expecting keyword_end
...(:resource).where(['resource_id= ? and survivor_id = ?', res...
...                               ^
/home/hadutes/zssn/app/models/survivor.rb:31: syntax error, unexpected ']', expecting keyword_end
...rvivor_id = ?', resource, self]).first
...                               ^):
  
app/models/survivor.rb:23: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
app/models/survivor.rb:31: syntax error, unexpected tIDENTIFIER, expecting keyword_end
app/models/survivor.rb:31: syntax error, unexpected ']', expecting keyword_end
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:20:08 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:23: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
...s currentItem 	raise %{u trying to give items u don't have}	...
...              	                ^
/home/hadutes/zssn/app/models/survivor.rb:31: syntax error, unexpected tIDENTIFIER, expecting keyword_end
...(:resource).where(['resource_id= ? and survivor_id = ?', res...
...                               ^
/home/hadutes/zssn/app/models/survivor.rb:31: syntax error, unexpected ']', expecting keyword_end
...rvivor_id = ?', resource, self]).first
...                               ^):
  
app/models/survivor.rb:23: syntax error, unexpected tIDENTIFIER, expecting keyword_do or '{' or '('
app/models/survivor.rb:31: syntax error, unexpected tIDENTIFIER, expecting keyword_end
app/models/survivor.rb:31: syntax error, unexpected ']', expecting keyword_end
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:22:39 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:43: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/survivor.rb:43: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:23:04 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:23: syntax error, unexpected keyword_end, expecting keyword_then or ';' or '\n'):
  
app/models/survivor.rb:23: syntax error, unexpected keyword_end, expecting keyword_then or ';' or '\n'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:24:52 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-28 18:24:52 UTC], ["id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 31 and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 7915ms (ActiveRecord: 7.8ms)


  
NameError (undefined local variable or method `survivor' for #<Survivor:0x00000004bfbef0>):
  
app/models/survivor.rb:34:in `block in trade'
app/models/survivor.rb:29:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:25:23 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-28 18:25:23 UTC], ["id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 31 and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (25.7ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 31], ["survivor_id", 3], ["quantity", 1], ["created_at", 2016-12-28 18:25:27 UTC], ["updated_at", 2016-12-28 18:25:27 UTC]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 9], ["updated_at", 2016-12-28 18:25:27 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 30 and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 6], ["updated_at", 2016-12-28 18:25:32 UTC], ["id", 6]]
  [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 8816ms (Views: 0.2ms | ActiveRecord: 53.3ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:29:20 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:15: syntax error, unexpected '\n', expecting '='
/home/hadutes/zssn/app/models/survivor.rb:41: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/survivor.rb:15: syntax error, unexpected '\n', expecting '='
app/models/survivor.rb:41: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:29:53 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-28 18:29:53 UTC], ["id", 4]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 31 and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-28 18:29:53 UTC], ["id", 15]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 8], ["updated_at", 2016-12-28 18:29:53 UTC], ["id", 7]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 30 and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 7], ["updated_at", 2016-12-28 18:29:53 UTC], ["id", 6]]
  [1m[35m (12.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 55ms (Views: 0.1ms | ActiveRecord: 21.3ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:32:21 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:19: syntax error, unexpected '\n', expecting =>
/home/hadutes/zssn/app/controllers/survivors_controller.rb:110: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/survivors_controller.rb:19: syntax error, unexpected '\n', expecting =>
app/controllers/survivors_controller.rb:110: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:32:51 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-28 18:32:51 UTC], ["id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 31 and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-28 18:32:51 UTC], ["id", 15]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 7], ["updated_at", 2016-12-28 18:32:51 UTC], ["id", 7]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 30 and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 8], ["updated_at", 2016-12-28 18:32:51 UTC], ["id", 6]]
  [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 66ms (Views: 0.5ms | ActiveRecord: 26.4ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:34:05 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:19: syntax error, unexpected '\n', expecting =>
/home/hadutes/zssn/app/controllers/survivors_controller.rb:110: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/survivors_controller.rb:19: syntax error, unexpected '\n', expecting =>
app/controllers/survivors_controller.rb:110: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:34:23 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-28 18:34:23 UTC], ["id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 31 and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-28 18:34:23 UTC], ["id", 15]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 6], ["updated_at", 2016-12-28 18:34:23 UTC], ["id", 7]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 30 and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 9], ["updated_at", 2016-12-28 18:34:23 UTC], ["id", 6]]
  [1m[35m (17.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 62ms (Views: 0.5ms | ActiveRecord: 26.8ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:35:20 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:19: syntax error, unexpected tIDENTIFIER, expecting keyword_end
    render json: :survivor traders[0], :trade_survivor traders[1]
                                  ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:19: syntax error, unexpected tIDENTIFIER, expecting &. or :: or '[' or '.'
    render json: :survivor traders[0], :trade_survivor traders[1]
                                                              ^):
  
app/controllers/survivors_controller.rb:19: syntax error, unexpected tIDENTIFIER, expecting keyword_end
app/controllers/survivors_controller.rb:19: syntax error, unexpected tIDENTIFIER, expecting &. or :: or '[' or '.'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2016-12-28 16:37:02 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 0], ["updated_at", 2016-12-28 18:37:02 UTC], ["id", 4]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 31 and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-28 18:37:02 UTC], ["id", 15]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-28 18:37:02 UTC], ["id", 7]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 30 and survivor_id = 4) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.1ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 10], ["updated_at", 2016-12-28 18:37:02 UTC], ["id", 6]]
  [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 52ms (Views: 0.7ms | ActiveRecord: 17.5ms)


  [1m[35m (147.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying PRIMARY KEY)[0m
  [1m[35m (125.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSurvivors (20161226132148)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (125.3ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" serial primary key, "name" character varying, "age" integer, "gender" character varying, "last_location_longitude" decimal, "last_location_latitude" decimal, "infected" boolean, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226132148"]]
  [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateResources (20161226133625)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (126.0ms)[0m  [1m[35mCREATE TABLE "resources" ("id" serial primary key, "name" character varying, "points" integer, "code" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226133625"]]
  [1m[35m (15.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateItems (20161226133648)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (78.9ms)[0m  [1m[35mCREATE TABLE "items" ("id" serial primary key, "resource_id" integer, "survivor_id" integer, "quantity" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_a57f853ade"
FOREIGN KEY ("resource_id")
  REFERENCES "resources" ("id")
, CONSTRAINT "fk_rails_27c1602cf3"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  [1m[35m (47.0ms)[0m  [1m[35mCREATE  INDEX  "index_items_on_resource_id" ON "items"  ("resource_id")[0m
  [1m[35m (40.8ms)[0m  [1m[35mCREATE  INDEX  "index_items_on_survivor_id" ON "items"  ("survivor_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226133648"]]
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (47.7ms)[0m  [1m[35mCREATE TABLE "infection_reports" ("id" serial primary key, "reporter_survivor_id" integer, "reported_survivor_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226134216"]]
  [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2016-12-29 16:34:34 UTC], ["updated_at", 2016-12-29 16:34:34 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2016-12-29 16:34:34 UTC], ["updated_at", 2016-12-29 16:34:34 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2016-12-29 16:34:34 UTC], ["updated_at", 2016-12-29 16:34:34 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2016-12-29 16:34:34 UTC], ["updated_at", 2016-12-29 16:34:34 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", 2016-12-29 16:34:34 UTC], ["updated_at", 2016-12-29 16:34:34 UTC]]
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started GET "/" for 127.0.0.1 at 2016-12-29 14:36:42 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Rails::WelcomeController#index as HTML
  Parameters: {"internal"=>true}
  Rendering /home/hadutes/.rvm/gems/ruby-2.3.3@5/gems/railties-5.0.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/hadutes/.rvm/gems/ruby-2.3.3@5/gems/railties-5.0.1/lib/rails/templates/rails/welcome/index.html.erb (4.5ms)
Completed 200 OK in 47ms (Views: 16.7ms | ActiveRecord: 0.0ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2016-12-29 14:36:43 -0200
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2016-12-29 14:39:02 -0200
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:15: syntax error, unexpected '\n', expecting '='
/home/hadutes/zssn/app/models/survivor.rb:42: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/survivor.rb:15: syntax error, unexpected '\n', expecting '='
app/models/survivor.rb:42: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors" for 127.0.0.1 at 2016-12-29 14:39:45 -0200
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:15: syntax error, unexpected '\n', expecting '='
/home/hadutes/zssn/app/models/survivor.rb:42: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/survivor.rb:15: syntax error, unexpected '\n', expecting '='
app/models/survivor.rb:42: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors" for 127.0.0.1 at 2016-12-29 15:05:39 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas", "age"=>25, "gender"=>"M", "last_location_latitude"=>-1.0, "last_location_longitude"=>2.3, "items"=>{"water"=>10}}}
Unpermitted parameter: items
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "lucas"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:1fb9388,'0.23E1',18(36)>], ["last_location_latitude", #<BigDecimal:1fb9950,'-0.1E1',9(36)>], ["created_at", 2016-12-29 17:05:39 UTC], ["updated_at", 2016-12-29 17:05:39 UTC]]
  [1m[35m (27.2ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 1], ["quantity", 10], ["created_at", 2016-12-29 17:05:39 UTC], ["updated_at", 2016-12-29 17:05:39 UTC]]
  [1m[35m (18.3ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 128ms (Views: 1.4ms | ActiveRecord: 58.8ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-29 15:07:46 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"julia", "age"=>25, "gender"=>"f", "last_location_latitude"=>-1.0, "last_location_longitude"=>2.3, "items"=>{"water"=>2, "food"=>5, "ammunation"=>7}}}
Unpermitted parameter: items
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "julia"], ["age", 25], ["gender", "f"], ["last_location_longitude", #<BigDecimal:7fdf241c3620,'0.23E1',18(36)>], ["last_location_latitude", #<BigDecimal:7fdf241c3828,'-0.1E1',9(36)>], ["created_at", 2016-12-29 17:07:46 UTC], ["updated_at", 2016-12-29 17:07:46 UTC]]
  [1m[35m (25.9ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 2], ["quantity", 2], ["created_at", 2016-12-29 17:07:46 UTC], ["updated_at", 2016-12-29 17:07:46 UTC]]
  [1m[35m (56.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 2], ["quantity", 5], ["created_at", 2016-12-29 17:07:46 UTC], ["updated_at", 2016-12-29 17:07:46 UTC]]
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 4], ["survivor_id", 2], ["quantity", 7], ["created_at", 2016-12-29 17:07:46 UTC], ["updated_at", 2016-12-29 17:07:46 UTC]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 124ms (Views: 0.7ms | ActiveRecord: 103.9ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-29 15:08:26 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"george", "age"=>25, "gender"=>"M", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "items"=>{"food"=>15, "medication"=>7}}}
Unpermitted parameter: items
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "george"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:7fdf240e0a78,'0.43E1',18(36)>], ["last_location_latitude", #<BigDecimal:7fdf240e0c58,'-0.1E1',9(36)>], ["created_at", 2016-12-29 17:08:26 UTC], ["updated_at", 2016-12-29 17:08:26 UTC]]
  [1m[35m (17.1ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 3], ["quantity", 15], ["created_at", 2016-12-29 17:08:26 UTC], ["updated_at", 2016-12-29 17:08:26 UTC]]
  [1m[35m (68.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 3], ["survivor_id", 3], ["quantity", 7], ["created_at", 2016-12-29 17:08:26 UTC], ["updated_at", 2016-12-29 17:08:26 UTC]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 111ms (Views: 0.8ms | ActiveRecord: 97.8ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:10:56 -0200
Error occurred while parsing request parameters.
Contents:

{
"trade"{
"survivor_id":3,
"items_to_give":{"water":5},
"items_to_receive":"{"medication":6}

}
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{
"trade"{
"survivor_id":3,
"items_to_give":{"water":5},
"items_to_receive":"{"medication":6}

}
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:13:30 -0200
Error occurred while parsing request parameters.
Contents:

{
"trade":{
"survivor_id":3,
"items_to_give":{"water":5},
"items_to_receive":"{"medication":6}

}
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{
"trade":{
"survivor_id":3,
"items_to_give":{"water":5},
"items_to_receive":"{"medication":6}

}
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:14:14 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"water"=>5}, "items_to_receive"=>{"medication"=>6}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.9ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'water' and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:14:14 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 3 and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 3], ["survivor_id", 1], ["quantity", 6], ["created_at", 2016-12-29 17:14:14 UTC], ["updated_at", 2016-12-29 17:14:14 UTC]]
  [1m[36mItem Load (1.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 17:14:14 UTC], ["id", 6]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 1 and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 3], ["quantity", 5], ["created_at", 2016-12-29 17:14:14 UTC], ["updated_at", 2016-12-29 17:14:14 UTC]]
  [1m[35m (27.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 196ms (Views: 1.4ms | ActiveRecord: 36.9ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:15:46 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>5}, "items_to_receive"=>{"water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (2.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 4.9ms)


  
RuntimeError (u trying to give items u don't have):
  
app/models/survivor.rb:23:in `block in trade'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:21:41 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>5}, "items_to_receive"=>{"water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 65ms (ActiveRecord: 1.9ms)


  
RuntimeError (Survivor lucas doesn't have food to give):
  
app/models/survivor.rb:23:in `block in trade'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:22:59 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>5}, "items_to_receive"=>{"water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 26ms (ActiveRecord: 2.9ms)


  
RuntimeError (Survivor lucas doesn't have food to trade):
  
app/models/survivor.rb:23:in `block in trade'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:24:03 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"medication"=>2}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.9ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'water' and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:24:03 UTC], ["id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 3 and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 8], ["updated_at", 2016-12-29 17:24:03 UTC], ["id", 7]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 71ms (ActiveRecord: 13.6ms)


  
RuntimeError (Survivor george have only 1 medication to trade):
  
app/models/survivor.rb:24:in `block in trade'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:24:13 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'water' and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:24:13 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 3 and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 7], ["updated_at", 2016-12-29 17:24:13 UTC], ["id", 7]]
  [1m[36mItem Load (1.8ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'medication' and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 0], ["updated_at", 2016-12-29 17:24:13 UTC], ["id", 6]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 1 and survivor_id = 3) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 6], ["updated_at", 2016-12-29 17:24:13 UTC], ["id", 8]]
  [1m[35m (41.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 103ms (Views: 1.2ms | ActiveRecord: 56.9ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:27:00 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>5}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'water' and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 17:27:00 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 2 and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 1], ["quantity", 5], ["created_at", 2016-12-29 17:27:00 UTC], ["updated_at", 2016-12-29 17:27:00 UTC]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resources.name = 'food' and survivor_id = 2) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 1 and survivor_id = 2) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 17:27:00 UTC], ["id", 2]]
  [1m[35m (21.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 82ms (Views: 1.0ms | ActiveRecord: 28.4ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:34:58 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>5}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE (resource_id = 1 and survivor_id = 1) LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 34ms (ActiveRecord: 1.8ms)


  
NoMethodError (undefined method `first' for #<Item:0x00000002e402d0>):
  
app/models/survivor.rb:33:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:35:41 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>5}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 27ms (ActiveRecord: 2.1ms)


  
NoMethodError (undefined method `%' for #<Hash:0x00000004079c80>):
  
app/models/survivor.rb:33:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:36:21 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>5}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 26ms (ActiveRecord: 1.3ms)


  
NoMethodError (undefined method `%' for {:resource_id=>1, :survivor_id=>1}:Hash):
  
app/models/survivor.rb:33:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:36:50 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>5}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 17:36:50 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 2 and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 10], ["updated_at", 2016-12-29 17:36:50 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 54ms (ActiveRecord: 5.4ms)


  
RuntimeError (Survivor julia doesn't have food to trade):
  
app/models/survivor.rb:34:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:37:06 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>5}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", nil], ["survivor_id", nil], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 31ms (ActiveRecord: 1.5ms)


  
RuntimeError (Survivor lucas doesn't have water to trade):
  
app/models/survivor.rb:34:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:37:27 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>5}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", nil], ["survivor_id", nil], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 3.5ms)


  
RuntimeError (Survivor lucas doesn't have water to trade):
  
app/models/survivor.rb:34:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:38:55 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>5}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 17:38:55 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 2 and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 10], ["updated_at", 2016-12-29 17:38:55 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 62ms (ActiveRecord: 15.8ms)


  
RuntimeError (Survivor julia doesn't have food to trade):
  
app/models/survivor.rb:34:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:39:19 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"ammunation"=>10}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 17:39:19 UTC], ["id", 1]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE (resource_id= 4 and survivor_id = 1) ORDER BY "items"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 4], ["survivor_id", 1], ["quantity", 10], ["created_at", 2016-12-29 17:39:19 UTC], ["updated_at", 2016-12-29 17:39:19 UTC]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 21ms (ActiveRecord: 6.3ms)


  
RuntimeError (Survivor julia have only 7 ammunation to trade):
  
app/models/survivor.rb:35:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:44:19 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"ammunation"=>10}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 17:44:19 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 4], ["survivor_id", 1], ["quantity", 10], ["created_at", 2016-12-29 17:44:19 UTC], ["updated_at", 2016-12-29 17:44:19 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 56ms (ActiveRecord: 13.2ms)


  
RuntimeError (points of trade does't match):
  
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:45:19 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1}, "items_to_receive"=>{"ammunation"=>2}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 6], ["updated_at", 2016-12-29 17:45:19 UTC], ["id", 7]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 4], ["survivor_id", 1], ["quantity", 2], ["created_at", 2016-12-29 17:45:19 UTC], ["updated_at", 2016-12-29 17:45:19 UTC]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:45:19 UTC], ["id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 3], ["survivor_id", 2], ["quantity", 1], ["created_at", 2016-12-29 17:45:19 UTC], ["updated_at", 2016-12-29 17:45:19 UTC]]
  [1m[35m (63.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 106ms (Views: 1.2ms | ActiveRecord: 73.2ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:47:18 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:47:18 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:47:18 UTC], ["id", 7]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:47:18 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:47:18 UTC], ["id", 12]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 53ms (ActiveRecord: 10.5ms)


  
RuntimeError (points of trade does't match):
  
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:50:18 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>1, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:50:18 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:50:18 UTC], ["id", 7]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:50:18 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 17:50:18 UTC], ["id", 12]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 17:50:18 UTC], ["id", 2]]
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:50:18 UTC], ["id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (15.9ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 2], ["quantity", 1], ["created_at", 2016-12-29 17:50:18 UTC], ["updated_at", 2016-12-29 17:50:18 UTC]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 17:50:18 UTC], ["id", 13]]
  [1m[35m (28.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 133ms (Views: 1.0ms | ActiveRecord: 62.0ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:56:00 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 17:56:00 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:56:00 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:56:01 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:56:01 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 72ms (ActiveRecord: 15.7ms)


  
RuntimeError (Items of trade's total points does't match. lucas giving 5
		 and receiving 6 points):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:56:23 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 17:56:23 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:56:23 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:56:23 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:56:23 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 58ms (ActiveRecord: 6.5ms)


  
RuntimeError (Items of trade's total points does't match. lucas giving 5
		 and receiving 6 points):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:56:49 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 17:56:49 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:56:49 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:56:49 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:56:49 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 61ms (ActiveRecord: 6.6ms)


  
RuntimeError (Items of trade's total points does't match. lucas giving 5):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:57:43 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 17:57:44 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:57:44 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:57:44 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:57:44 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 60ms (ActiveRecord: 7.4ms)


  
RuntimeError (Items of trade's total points does't match. lucas giving 5
		 and receiving 6 points):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 15:57:57 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 17:57:57 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 17:57:57 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:57:57 UTC], ["id", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 17:57:57 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 71ms (ActiveRecord: 7.2ms)


  
RuntimeError (Items of trade's total points does't match. #{self.name} giving #{points_given}
		 and receiving #{points_received} points):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:02:29 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:02:29 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:02:29 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:02:29 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:02:29 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 64ms (ActiveRecord: 7.2ms)


  
RuntimeError (Items of trade's total points does't match. lucas giving 5and receiving 6 points):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:02:41 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:02:41 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (2.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:02:41 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:02:41 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:02:41 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 68ms (ActiveRecord: 9.1ms)


  
RuntimeError (Items of trade's total points does't match. lucas giving 5 and receiving 6 points):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:03:41 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:03:41 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:03:41 UTC], ["id", 7]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:03:41 UTC], ["id", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:03:41 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 70ms (ActiveRecord: 9.2ms)


  
RuntimeError (Trade's items total points does't match. lucas giving 5 and receiving 6 points):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:09:00 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>2, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:09:01 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:09:01 UTC], ["id", 7]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:09:01 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:09:01 UTC], ["id", 12]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 68ms (ActiveRecord: 8.3ms)


  
RuntimeError (Trade's items total points does't match. lucas giving 5 and receiving 6 points.):
  
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:09:07 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>1, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (3.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:09:07 UTC], ["id", 9]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (1.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:09:07 UTC], ["id", 7]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:09:07 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.9ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:09:07 UTC], ["id", 12]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 18:09:07 UTC], ["id", 2]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:09:07 UTC], ["id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 18:09:07 UTC], ["id", 14]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:09:07 UTC], ["id", 13]]
  [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
Completed 200 OK in 154ms (Views: 6.5ms | ActiveRecord: 33.4ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:13:48 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>1, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 49ms (ActiveRecord: 9.5ms)


  
NameError (undefined local variable or method `resource' for #<Class:0x00000004201b70>):
  
app/models/item.rb:10:in `<class:Item>'
app/models/item.rb:1:in `<top (required)>'
app/models/survivor.rb:32:in `block in give'
app/models/survivor.rb:30:in `give'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:17:40 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>1, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 24ms (ActiveRecord: 1.4ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/item.rb:4:in `<class:Item>'
app/models/item.rb:1:in `<top (required)>'
app/models/survivor.rb:32:in `block in give'
app/models/survivor.rb:30:in `give'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:19:12 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>1, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.9ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/item.rb:4:in `<class:Item>'
app/models/item.rb:1:in `<top (required)>'
app/models/survivor.rb:32:in `block in give'
app/models/survivor.rb:30:in `give'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:19:50 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>1, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 26ms (ActiveRecord: 2.5ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/item.rb:4:in `<class:Item>'
app/models/item.rb:1:in `<top (required)>'
app/models/survivor.rb:32:in `block in give'
app/models/survivor.rb:30:in `give'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:20:32 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>1, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 18:20:32 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:20:32 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 6], ["updated_at", 2016-12-29 18:20:32 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:20:32 UTC], ["id", 12]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 2]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 18:20:32 UTC], ["id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:20:32 UTC], ["id", 14]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:20:32 UTC], ["id", 13]]
  [1m[35m (38.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
Completed 200 OK in 141ms (Views: 4.5ms | ActiveRecord: 53.3ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:23:44 -0200
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:15: syntax error, unexpected =>, expecting '}'
...urvivor.items.each {:include => {:resource => {:only => :nam...
...                               ^):
  
app/models/survivor.rb:15: syntax error, unexpected =>, expecting '}'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:24:44 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1, "food"=>1}, "items_to_receive"=>{"ammunation"=>1, "water"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 18:24:44 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 18:24:44 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 7], ["updated_at", 2016-12-29 18:24:44 UTC], ["id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 6], ["updated_at", 2016-12-29 18:24:44 UTC], ["id", 12]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 64ms (ActiveRecord: 7.1ms)


  
RuntimeError (Survivor julia doesn't have water to trade.):
  
app/models/survivor.rb:33:in `block in give'
app/models/survivor.rb:30:in `give'
app/models/survivor.rb:21:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:25:06 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1}, "items_to_receive"=>{"ammunation"=>2}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 18:25:06 UTC], ["id", 7]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 7], ["updated_at", 2016-12-29 18:25:06 UTC], ["id", 12]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:25:06 UTC], ["id", 13]]
  [1m[35m (93.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
Completed 200 OK in 153ms (Views: 2.0ms | ActiveRecord: 103.0ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:27:02 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"medication"=>1}, "items_to_receive"=>{"ammunation"=>2}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 18:27:02 UTC], ["id", 7]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 9], ["updated_at", 2016-12-29 18:27:02 UTC], ["id", 12]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 59ms (ActiveRecord: 13.8ms)


  
RuntimeError (Survivor julia doesn't have ammunation to trade.):
  
app/models/survivor.rb:36:in `block in give'
app/models/survivor.rb:33:in `give'
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:11:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:27:36 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"ammuntaion"=>3}, "items_to_receive"=>{"food"=>2}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameter: ammuntaion
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Unpermitted parameter: ammuntaion
Unpermitted parameter: ammuntaion
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:27:37 UTC], ["id", 9]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 3.2ms)


  
RuntimeError (Trade's items total points does't match. lucas giving 0 and receiving 6 points.):
  
app/models/survivor.rb:27:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:27:55 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"ammunation"=>3}, "items_to_receive"=>{"food"=>2}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (1.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:27:55 UTC], ["id", 12]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:27:55 UTC], ["id", 9]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 42ms (ActiveRecord: 9.0ms)


  
RuntimeError (Trade's items total points does't match. lucas giving 3 and receiving 6 points.):
  
app/models/survivor.rb:27:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:28:07 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"ammunation"=>3}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:28:07 UTC], ["id", 12]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:28:07 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 18:28:07 UTC], ["id", 14]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (1.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 4], ["survivor_id", 2], ["quantity", 3], ["created_at", 2016-12-29 18:28:07 UTC], ["updated_at", 2016-12-29 18:28:07 UTC]]
  [1m[35m (37.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
Completed 200 OK in 97ms (Views: 3.2ms | ActiveRecord: 49.4ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:29:49 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"ammunation"=>3}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 18:29:49 UTC], ["id", 12]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:29:49 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 18:29:49 UTC], ["id", 14]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 6], ["updated_at", 2016-12-29 18:29:49 UTC], ["id", 15]]
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
Completed 200 OK in 116ms (Views: 2.0ms | ActiveRecord: 37.5ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:31:10 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"ammunation"=>3}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 33ms (ActiveRecord: 2.1ms)


  
RuntimeError (Survivor lucas have only 1 ammunation to trade.):
  
app/models/survivor.rb:37:in `block in give'
app/models/survivor.rb:33:in `give'
app/models/survivor.rb:24:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:31:36 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (1.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:31:36 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:31:36 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 14]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 2], ["quantity", 1], ["created_at", 2016-12-29 18:31:36 UTC], ["updated_at", 2016-12-29 18:31:36 UTC]]
  [1m[35m (67.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
Completed 200 OK in 142ms (Views: 2.0ms | ActiveRecord: 79.9ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:34:17 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:34:17 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:34:17 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 16]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.5ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 2], ["quantity", 1], ["created_at", 2016-12-29 18:34:17 UTC], ["updated_at", 2016-12-29 18:34:17 UTC]]
  [1m[35m (18.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
Completed 200 OK in 105ms (Views: 2.0ms | ActiveRecord: 40.6ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:39:12 -0200
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:15: syntax error, unexpected tIDENTIFIER, expecting ']'
		[Item.jsonify survivor.item,Item.jsonify trade_survivor.items] 
		                      ^
/home/hadutes/zssn/app/models/survivor.rb:15: syntax error, unexpected tIDENTIFIER, expecting &. or :: or '[' or '.'
		[Item.jsonify survivor.item,Item.jsonify trade_survivor.items] 
		                                                       ^
/home/hadutes/zssn/app/models/survivor.rb:15: syntax error, unexpected ']', expecting keyword_end
		[Item.jsonify survivor.item,Item.jsonify trade_survivor.items] 
		                                                              ^
/home/hadutes/zssn/app/models/survivor.rb:62: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/survivor.rb:15: syntax error, unexpected tIDENTIFIER, expecting ']'
app/models/survivor.rb:15: syntax error, unexpected tIDENTIFIER, expecting &. or :: or '[' or '.'
app/models/survivor.rb:15: syntax error, unexpected ']', expecting keyword_end
app/models/survivor.rb:62: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:40:29 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 23ms (ActiveRecord: 2.4ms)


  
SyntaxError (/home/hadutes/zssn/app/models/item.rb:20: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/item.rb:20: syntax error, unexpected end-of-input, expecting keyword_end
app/models/survivor.rb:33:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:40:57 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 33ms (ActiveRecord: 2.5ms)


  
SyntaxError (/home/hadutes/zssn/app/models/item.rb:21: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/models/item.rb:21: syntax error, unexpected end-of-input, expecting keyword_end
app/models/survivor.rb:33:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:41:30 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:41:30 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:41:30 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "items" WHERE "items"."id" = $1[0m  [["id", 17]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[35mSQL (31.1ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 2], ["quantity", 1], ["created_at", 2016-12-29 18:41:30 UTC], ["updated_at", 2016-12-29 18:41:30 UTC]]
  [1m[35m (33.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 181ms (Views: 0.3ms | ActiveRecord: 74.7ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 16:42:42 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"ammunation"=>1, "medication"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:42:42 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 18:42:42 UTC], ["id", 12]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 18:42:42 UTC], ["id", 7]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2016-12-29 18:42:42 UTC], ["id", 15]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 3], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2016-12-29 18:42:42 UTC], ["id", 13]]
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 18:42:42 UTC], ["id", 18]]
  [1m[35m (29.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 121ms (Views: 0.2ms | ActiveRecord: 46.2ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 20:24:40 -0200
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 20:25:04 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (15.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 22:25:05 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (14.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 22:25:05 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 22:25:05 UTC], ["id", 18]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 22:25:05 UTC], ["id", 18]]
  [1m[35m (44.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 297ms (Views: 0.3ms | ActiveRecord: 118.1ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 20:25:15 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>2}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (1.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (2.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 22:25:15 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 22:25:15 UTC], ["id", 9]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 39ms (ActiveRecord: 12.8ms)


  
RuntimeError (Trade's items total points does't match. lucas giving 6 and receiving 3 points.):
  
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 20:58:26 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>2}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 22:58:36 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 22:58:36 UTC], ["id", 9]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 59ms (ActiveRecord: 4.6ms)


  
RuntimeError (Trade's items total points don't match. lucas giving 6 and receiving 3 points.):
  
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 20:59:51 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>2}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (17.1ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 22:59:51 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 22:59:52 UTC], ["id", 9]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 70ms (ActiveRecord: 21.9ms)


  
RuntimeError (Trade's items total points do not match. Survivor lucas giving 6 and receiving 3 points.):
  
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started GET "/survivors/" for 127.0.0.1 at 2016-12-29 21:02:14 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.7ms)


Started GET "/survivors/" for 127.0.0.1 at 2016-12-29 21:32:41 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 200 OK in 13ms (Views: 10.1ms | ActiveRecord: 5.8ms)


Started POST "/survivors" for 127.0.0.1 at 2016-12-29 21:36:36 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "items"=>{"food"=>5, "medication"=>7, "gold"=>7, "water"=>2}}}
Unpermitted parameter: items
Unpermitted parameter: gold
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (37.3ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "costinha"], ["age", 25], ["gender", "F"], ["last_location_longitude", #<BigDecimal:3595cd8,'0.43E1',18(36)>], ["last_location_latitude", #<BigDecimal:3595f80,'-0.1E1',9(36)>], ["created_at", 2016-12-29 23:37:22 UTC], ["updated_at", 2016-12-29 23:37:22 UTC]]
  [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameter: gold
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 4], ["quantity", 2], ["created_at", 2016-12-29 23:37:22 UTC], ["updated_at", 2016-12-29 23:37:22 UTC]]
  [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 4], ["quantity", 5], ["created_at", 2016-12-29 23:37:22 UTC], ["updated_at", 2016-12-29 23:37:22 UTC]]
  [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 3], ["survivor_id", 4], ["quantity", 7], ["created_at", 2016-12-29 23:37:22 UTC], ["updated_at", 2016-12-29 23:37:22 UTC]]
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 45661ms (Views: 1.6ms | ActiveRecord: 85.4ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 21:41:42 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>2}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (32.0ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 23:41:42 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 23:41:42 UTC], ["id", 9]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 72ms (ActiveRecord: 38.3ms)


  
RuntimeError (Trade's items total points do not match. Survivor lucas giving 6 and receiving 3 points.):
  
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 21:41:59 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 23:41:59 UTC], ["id", 9]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2016-12-29 23:41:59 UTC], ["id", 9]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2016-12-29 23:41:59 UTC], ["id", 18]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2016-12-29 23:41:59 UTC], ["id", 18]]
  [1m[35m (58.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 147ms (Views: 0.3ms | ActiveRecord: 75.6ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2016-12-29 21:42:21 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>10}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (2.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 16ms (ActiveRecord: 4.6ms)


  
RuntimeError (Survivor lucas have only 3 food to trade.):
  
app/models/survivor.rb:32:in `block in give'
app/models/survivor.rb:28:in `give'
app/models/survivor.rb:19:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 11:00:44 -0200
  [1m[36mActiveRecord::SchemaMigration Load (20.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (20.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (26.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (24.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 13:00:46 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2017-01-02 13:00:46 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 13:00:46 UTC], ["id", 18]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 13:00:46 UTC], ["id", 18]]
  [1m[35m (15.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 309ms (Views: 0.3ms | ActiveRecord: 219.5ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:07:12 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 500 Internal Server Error in 20ms (ActiveRecord: 4.9ms)


  
NoMethodError (undefined method `jsonify' for #<Survivor:0x00000005015270>):
  
app/controllers/survivors_controller.rb:9:in `block in index'
app/controllers/survivors_controller.rb:8:in `index'
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:07:47 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
Completed 200 OK in 57ms (Views: 0.5ms | ActiveRecord: 10.4ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:08:46 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 95ms (Views: 0.4ms | ActiveRecord: 16.7ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:11:12 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:65: syntax error, unexpected =>, expecting '}'
							:resource =>{:only => :name}
							            ^
/home/hadutes/zssn/app/models/survivor.rb:66: syntax error, unexpected '}', expecting keyword_end
/home/hadutes/zssn/app/models/survivor.rb:67: syntax error, unexpected ')', expecting keyword_end):
  
app/models/survivor.rb:65: syntax error, unexpected =>, expecting '}'
app/models/survivor.rb:66: syntax error, unexpected '}', expecting keyword_end
app/models/survivor.rb:67: syntax error, unexpected ')', expecting keyword_end
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:12:57 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 93ms (Views: 0.3ms | ActiveRecord: 16.5ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:13:44 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 92ms (Views: 0.2ms | ActiveRecord: 16.0ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:13:46 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (1.0ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 47ms (Views: 0.1ms | ActiveRecord: 5.2ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:13:57 -0200
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:14:11 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 95ms (Views: 0.3ms | ActiveRecord: 16.2ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:17:39 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 500 Internal Server Error in 70ms (ActiveRecord: 12.5ms)


  
NoMethodError (undefined method `<<' for nil:NilClass):
  
app/controllers/survivors_controller.rb:9:in `block in index'
app/controllers/survivors_controller.rb:8:in `index'
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:19:59 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 94ms (Views: 0.4ms | ActiveRecord: 16.4ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:21:04 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 94ms (ActiveRecord: 15.5ms)


  
ArgumentError (too few arguments):
  
app/controllers/survivors_controller.rb:11:in `format'
app/controllers/survivors_controller.rb:11:in `index'
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:21:58 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 121ms (ActiveRecord: 15.9ms)


  
NoMethodError (undefined method `respond_to' for #<SurvivorsController:0x007fc9f80741e8>
Did you mean?  respond_to?):
  
app/controllers/survivors_controller.rb:11:in `index'
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:23:17 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 500 Internal Server Error in 94ms (Views: 0.8ms | ActiveRecord: 15.6ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/survivors_controller.rb:12:in `block in index'
app/controllers/survivors_controller.rb:11:in `index'
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:24:04 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 94ms (Views: 0.3ms | ActiveRecord: 16.3ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:26:40 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:12: syntax error, unexpected '}', expecting =>
/home/hadutes/zssn/app/controllers/survivors_controller.rb:104: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/survivors_controller.rb:12: syntax error, unexpected '}', expecting =>
app/controllers/survivors_controller.rb:104: syntax error, unexpected end-of-input, expecting keyword_end
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:28:02 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 97ms (Views: 2.6ms | ActiveRecord: 16.4ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:28:39 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 96ms (Views: 2.3ms | ActiveRecord: 16.0ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 11:31:05 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Completed 200 OK in 67ms (Views: 5.0ms | ActiveRecord: 3.0ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (35.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[35m (291.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "zssn_dev"[0m
  [1m[35m (234.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "zssn_test"[0m
  [1m[35m (1183.1ms)[0m  [1m[35mCREATE DATABASE "zssn_dev" ENCODING = 'unicode'[0m
  [1m[35m (590.0ms)[0m  [1m[35mCREATE DATABASE "zssn_test" ENCODING = 'unicode'[0m
  [1m[35m (98.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying PRIMARY KEY)[0m
  [1m[35m (112.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSurvivors (20161226132148)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (89.6ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" serial primary key, "name" character varying, "age" integer, "gender" character varying, "last_location_longitude" decimal, "last_location_latitude" decimal, "infected" boolean DEFAULT 'f', "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226132148"]]
  [1m[35m (16.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateResources (20161226133625)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (68.8ms)[0m  [1m[35mCREATE TABLE "resources" ("id" serial primary key, "name" character varying, "points" integer, "code" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226133625"]]
  [1m[35m (27.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateItems (20161226133648)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (45.5ms)[0m  [1m[35mCREATE TABLE "items" ("id" serial primary key, "resource_id" integer, "survivor_id" integer, "quantity" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_a57f853ade"
FOREIGN KEY ("resource_id")
  REFERENCES "resources" ("id")
, CONSTRAINT "fk_rails_27c1602cf3"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  [1m[35m (30.0ms)[0m  [1m[35mCREATE  INDEX  "index_items_on_resource_id" ON "items"  ("resource_id")[0m
  [1m[35m (31.5ms)[0m  [1m[35mCREATE  INDEX  "index_items_on_survivor_id" ON "items"  ("survivor_id")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226133648"]]
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (47.6ms)[0m  [1m[35mCREATE TABLE "infection_reports" ("id" serial primary key, "reporter_survivor_id" integer NOT NULL, "reported_survivor_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226134216"]]
  [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2017-01-02 13:38:30 UTC], ["updated_at", 2017-01-02 13:38:30 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2017-01-02 13:38:30 UTC], ["updated_at", 2017-01-02 13:38:30 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2017-01-02 13:38:30 UTC], ["updated_at", 2017-01-02 13:38:30 UTC]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2017-01-02 13:38:30 UTC], ["updated_at", 2017-01-02 13:38:30 UTC]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", 2017-01-02 13:38:30 UTC], ["updated_at", 2017-01-02 13:38:30 UTC]]
  [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started POST "/survivors" for 127.0.0.1 at 2017-01-02 11:38:49 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas", "age"=>25, "gender"=>"M", "last_location_latitude"=>-1.0, "last_location_longitude"=>2.3, "items"=>{"water"=>10}}}
Unpermitted parameter: items
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "lucas"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:5580840,'0.23E1',18(36)>], ["last_location_latitude", #<BigDecimal:5580c28,'-0.1E1',9(36)>], ["created_at", 2017-01-02 13:38:50 UTC], ["updated_at", 2017-01-02 13:38:50 UTC]]
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 1], ["quantity", 10], ["created_at", 2017-01-02 13:38:50 UTC], ["updated_at", 2017-01-02 13:38:50 UTC]]
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 79ms (Views: 1.5ms | ActiveRecord: 29.0ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-02 11:39:01 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"julia", "age"=>25, "gender"=>"f", "last_location_latitude"=>-1.0, "last_location_longitude"=>2.3, "items"=>{"water"=>2, "food"=>5, "ammunation"=>7}}}
Unpermitted parameter: items
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "julia"], ["age", 25], ["gender", "f"], ["last_location_longitude", #<BigDecimal:52c8f80,'0.23E1',18(36)>], ["last_location_latitude", #<BigDecimal:52c9188,'-0.1E1',9(36)>], ["created_at", 2017-01-02 13:39:01 UTC], ["updated_at", 2017-01-02 13:39:01 UTC]]
  [1m[35m (22.1ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 2], ["quantity", 2], ["created_at", 2017-01-02 13:39:01 UTC], ["updated_at", 2017-01-02 13:39:01 UTC]]
  [1m[35m (59.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 2], ["quantity", 5], ["created_at", 2017-01-02 13:39:01 UTC], ["updated_at", 2017-01-02 13:39:01 UTC]]
  [1m[35m (17.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 4], ["survivor_id", 2], ["quantity", 7], ["created_at", 2017-01-02 13:39:01 UTC], ["updated_at", 2017-01-02 13:39:01 UTC]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 128ms (Views: 0.9ms | ActiveRecord: 111.8ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-02 11:39:05 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"george", "age"=>25, "gender"=>"M", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "items"=>{"food"=>15, "medication"=>7}}}
Unpermitted parameter: items
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "george"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:520a2d8,'0.43E1',18(36)>], ["last_location_latitude", #<BigDecimal:520a4e0,'-0.1E1',9(36)>], ["created_at", 2017-01-02 13:39:05 UTC], ["updated_at", 2017-01-02 13:39:05 UTC]]
  [1m[35m (21.1ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 3], ["quantity", 15], ["created_at", 2017-01-02 13:39:05 UTC], ["updated_at", 2017-01-02 13:39:05 UTC]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 3], ["survivor_id", 3], ["quantity", 7], ["created_at", 2017-01-02 13:39:05 UTC], ["updated_at", 2017-01-02 13:39:05 UTC]]
  [1m[35m (61.3ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 107ms (Views: 1.8ms | ActiveRecord: 89.9ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-02 11:40:11 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>2, "id"=>"1", "survivor"=>{"infected"=>2}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-02 13:40:12 UTC], ["updated_at", 2017-01-02 13:40:12 UTC]]
  [1m[35m (32.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 86ms (Views: 0.6ms | ActiveRecord: 44.7ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-02 12:23:44 -0200
  [1m[36mActiveRecord::SchemaMigration Load (23.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:31: syntax error, unexpected ',', expecting =>
@survivor, :include => 
          ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:35: syntax error, unexpected ',', expecting keyword_end
          },:except => [:created_at, :updated_at]
            ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
      },:trade_survivor=>traders[1]}
       ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
/home/hadutes/zssn/app/controllers/survivors_controller.rb:118: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/survivors_controller.rb:31: syntax error, unexpected ',', expecting =>
app/controllers/survivors_controller.rb:35: syntax error, unexpected ',', expecting keyword_end
app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
app/controllers/survivors_controller.rb:118: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-02 12:24:44 -0200
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:37: syntax error, unexpected ',', expecting '}'
      ,:trade_survivor=>traders[1]}
       ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
/home/hadutes/zssn/app/controllers/survivors_controller.rb:118: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/survivors_controller.rb:37: syntax error, unexpected ',', expecting '}'
app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
app/controllers/survivors_controller.rb:118: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-02 12:29:47 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:31: syntax error, unexpected =>, expecting '}'
@survivor => {:include => 
            ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:37: syntax error, unexpected ',', expecting keyword_end
      },:trade_survivor=>traders[1]}
        ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
/home/hadutes/zssn/app/controllers/survivors_controller.rb:118: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/survivors_controller.rb:31: syntax error, unexpected =>, expecting '}'
app/controllers/survivors_controller.rb:37: syntax error, unexpected ',', expecting keyword_end
app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
app/controllers/survivors_controller.rb:118: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-02 12:30:18 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>2, "id"=>"1", "survivor"=>{"infected"=>2}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (20.1ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-02 14:30:19 UTC], ["updated_at", 2017-01-02 14:30:19 UTC]]
  [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
Completed 200 OK in 111ms (Views: 0.6ms | ActiveRecord: 54.2ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 12:30:44 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (1.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (54.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (19.9ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 111ms (ActiveRecord: 85.2ms)


  
RuntimeError (Survivor lucas doesn't have food to trade.):
  
app/models/survivor.rb:31:in `block in give'
app/models/survivor.rb:28:in `give'
app/models/survivor.rb:19:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:27:in `trade'
Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:31:00 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (15.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 14:31:00 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 14:31:00 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:31:00 UTC], ["id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 14:31:00 UTC], ["id", 3]]
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 158ms (Views: 0.4ms | ActiveRecord: 40.3ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:31:32 -0200
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:37: syntax error, unexpected ',', expecting '}'
      ,:trade_survivor=>traders[1]}
       ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
/home/hadutes/zssn/app/controllers/survivors_controller.rb:118: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/survivors_controller.rb:37: syntax error, unexpected ',', expecting '}'
app/controllers/survivors_controller.rb:37: syntax error, unexpected '}', expecting keyword_end
app/controllers/survivors_controller.rb:118: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:31:46 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 14:31:46 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 14:31:46 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:31:46 UTC], ["id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 14:31:46 UTC], ["id", 3]]
  [1m[35m (12.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 116ms (Views: 0.7ms | ActiveRecord: 35.8ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:35:39 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 14:35:40 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 14:35:40 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:35:40 UTC], ["id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 14:35:40 UTC], ["id", 3]]
  [1m[35m (21.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 114ms (Views: 0.6ms | ActiveRecord: 32.6ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:36:28 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 14:36:28 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 14:36:28 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:36:28 UTC], ["id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 14:36:28 UTC], ["id", 3]]
  [1m[35m (19.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 117ms (Views: 1.0ms | ActiveRecord: 30.5ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:40:35 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 14:40:35 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.0ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 14:40:35 UTC], ["id", 5]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:40:35 UTC], ["id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 14:40:35 UTC], ["id", 3]]
  [1m[35m (17.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 120ms (Views: 0.8ms | ActiveRecord: 28.3ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:41:40 -0200
  
SyntaxError (/home/hadutes/zssn/app/controllers/survivors_controller.rb:31: syntax error, unexpected ',', expecting ')'
          :survivor => @survivor.as_json(, :include => 
                                          ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:35: syntax error, unexpected ',', expecting keyword_end
                    },:except => [:created_at, :updated_at]
                      ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:36: syntax error, unexpected ')', expecting keyword_end
          ), 
           ^
/home/hadutes/zssn/app/controllers/survivors_controller.rb:44: syntax error, unexpected '}', expecting keyword_end
/home/hadutes/zssn/app/controllers/survivors_controller.rb:125: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/survivors_controller.rb:31: syntax error, unexpected ',', expecting ')'
app/controllers/survivors_controller.rb:35: syntax error, unexpected ',', expecting keyword_end
app/controllers/survivors_controller.rb:36: syntax error, unexpected ')', expecting keyword_end
app/controllers/survivors_controller.rb:44: syntax error, unexpected '}', expecting keyword_end
app/controllers/survivors_controller.rb:125: syntax error, unexpected end-of-input, expecting keyword_end
Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:41:58 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 14:41:58 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 14:41:58 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:41:58 UTC], ["id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 14:41:59 UTC], ["id", 3]]
  [1m[35m (15.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 107ms (Views: 0.8ms | ActiveRecord: 24.2ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:42:42 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.1ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 14:42:42 UTC], ["id", 5]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 14:42:42 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:42:42 UTC], ["id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 14:42:42 UTC], ["id", 3]]
  [1m[35m (9.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 101ms (Views: 0.7ms | ActiveRecord: 20.7ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-02 12:43:28 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 14:43:28 UTC], ["id", 5]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 14:43:28 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:43:28 UTC], ["id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 14:43:28 UTC], ["id", 3]]
  [1m[35m (61.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 152ms (Views: 0.5ms | ActiveRecord: 75.8ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 12:46:24 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>1, "ammunation"=>2}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 9], ["updated_at", 2017-01-02 14:46:24 UTC], ["id", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (24.4ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 1], ["quantity", 1], ["created_at", 2017-01-02 14:46:24 UTC], ["updated_at", 2017-01-02 14:46:24 UTC]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 4], ["survivor_id", 1], ["quantity", 2], ["created_at", 2017-01-02 14:46:24 UTC], ["updated_at", 2017-01-02 14:46:24 UTC]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 57ms (ActiveRecord: 30.5ms)


  
RuntimeError (Trade's items total points do not match. Survivor lucas giving 4 and receiving 5 points.):
  
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:27:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 12:46:40 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>1, "ammunation"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 9], ["updated_at", 2017-01-02 14:46:40 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 1], ["quantity", 1], ["created_at", 2017-01-02 14:46:40 UTC], ["updated_at", 2017-01-02 14:46:40 UTC]]
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 4], ["survivor_id", 1], ["quantity", 1], ["created_at", 2017-01-02 14:46:40 UTC], ["updated_at", 2017-01-02 14:46:40 UTC]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 14:46:40 UTC], ["id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 6], ["updated_at", 2017-01-02 14:46:40 UTC], ["id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2017-01-02 14:46:40 UTC], ["id", 2]]
  [1m[35m (52.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (1.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 144ms (Views: 0.6ms | ActiveRecord: 72.4ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-02 12:48:46 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>2, "id"=>"1", "survivor"=>{"infected"=>2}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-02 14:48:46 UTC], ["updated_at", 2017-01-02 14:48:46 UTC]]
  [1m[35m (20.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
Completed 200 OK in 52ms (Views: 0.5ms | ActiveRecord: 31.8ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-02 12:49:47 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>2, "id"=>"1", "survivor"=>{"infected"=>2}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-02 14:49:48 UTC], ["updated_at", 2017-01-02 14:49:48 UTC]]
  [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[33mUPDATE "survivors" SET "infected" = $1, "updated_at" = $2 WHERE "survivors"."id" = $3[0m  [["infected", true], ["updated_at", 2017-01-02 14:50:17 UTC], ["id", 2]]
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 29169ms (Views: 0.9ms | ActiveRecord: 64.1ms)


Started POST "/survivors/" for 127.0.0.1 at 2017-01-02 12:50:48 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"infected"=>2, "survivor"=>{"infected"=>2}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Completed 422 Unprocessable Entity in 116ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started GET "/survivors/" for 127.0.0.1 at 2017-01-02 12:50:59 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (1.1ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 500 Internal Server Error in 18ms (ActiveRecord: 1.1ms)


  
NoMethodError (undefined method `jsonify' for #<Survivor:0x007f9338279a48>):
  
app/controllers/survivors_controller.rb:9:in `block in index'
app/controllers/survivors_controller.rb:8:in `index'
Started GET "/survivors/" for 127.0.0.1 at 2017-01-02 12:51:45 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (2.7ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 85ms (Views: 66.2ms | ActiveRecord: 21.2ms)


Started GET "/survivors/1" for 127.0.0.1 at 2017-01-02 12:52:30 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 51ms (Views: 33.9ms | ActiveRecord: 2.0ms)


Started GET "/survivors/1" for 127.0.0.1 at 2017-01-02 12:52:30 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 26.5ms | ActiveRecord: 3.0ms)


Started GET "/survivors/1" for 127.0.0.1 at 2017-01-02 12:52:48 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 18ms (Views: 14.1ms | ActiveRecord: 2.5ms)


Started GET "/survivors/2" for 127.0.0.1 at 2017-01-02 12:52:54 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"2", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 13.5ms | ActiveRecord: 2.4ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 13:00:57 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/models/survivor.rb:9: syntax error, unexpected keyword_do_block, expecting &. or :: or '[' or '.'
		for [survivor,trade_survivor] do |s|
		                                ^
/home/hadutes/zssn/app/models/survivor.rb:10: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
			raise "Infected survivor #{s.name} cannot trade!" if s.infected?
			       ^
/home/hadutes/zssn/app/models/survivor.rb:67: syntax error, unexpected keyword_end, expecting end-of-input):
  
app/models/survivor.rb:9: syntax error, unexpected keyword_do_block, expecting &. or :: or '[' or '.'
app/models/survivor.rb:10: syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('
app/models/survivor.rb:67: syntax error, unexpected keyword_end, expecting end-of-input
Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 13:01:51 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>1, "ammunation"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 500 Internal Server Error in 23ms (ActiveRecord: 6.2ms)


  
RuntimeError (Infected survivor julia cannot trade!):
  
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `each'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:27:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 13:03:06 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>1, "ammunation"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 8], ["updated_at", 2017-01-02 15:03:06 UTC], ["id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 15:03:06 UTC], ["id", 9]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 15:03:06 UTC], ["id", 10]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 3], ["updated_at", 2017-01-02 15:03:06 UTC], ["id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "ammunation"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 4], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 5], ["updated_at", 2017-01-02 15:03:06 UTC], ["id", 4]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[36mItem Load (1.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 1], ["survivor_id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 4], ["updated_at", 2017-01-02 15:03:06 UTC], ["id", 2]]
  [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 160ms (Views: 0.7ms | ActiveRecord: 30.0ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 13:03:22 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>1, "ammunation"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 2.2ms)


  
RuntimeError (Infected survivor julia cannot trade!):
  
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `each'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:27:in `trade'
Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:28:09 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms)


Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:29:21 -0200
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant ReportsController::Survivors):
  
app/controllers/reports_controller.rb:5:in `show_infected_rate'
Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:30:27 -0200
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
Completed 200 OK in 36ms (Views: 15.3ms | ActiveRecord: 6.7ms)


Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:30:51 -0200
  
SyntaxError (/home/hadutes/zssn/app/controllers/reports_controller.rb:7: syntax error, unexpected ':', expecting =>
    render json: {:infected_rate: InfectionReport.infection_rate} 
                                 ^
/home/hadutes/zssn/app/controllers/reports_controller.rb:7: syntax error, unexpected '}', expecting keyword_end
    render json: {:infected_rate: InfectionReport.infection_rate} 
                                                                 ^):
  
app/controllers/reports_controller.rb:7: syntax error, unexpected ':', expecting =>
app/controllers/reports_controller.rb:7: syntax error, unexpected '}', expecting keyword_end
Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:31:25 -0200
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
Completed 200 OK in 12ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:34:39 -0200
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/hadutes/zssn/app/models/infection_report.rb:15: syntax error, unexpected ':', expecting keyword_end
...nfected = Survivor.select(:id):where(:infected => true).count
...                               ^):
  
app/models/infection_report.rb:15: syntax error, unexpected ':', expecting keyword_end
app/controllers/reports_controller.rb:7:in `show_infected_rate'
Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:35:09 -0200
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", true]]
Completed 200 OK in 26ms (Views: 0.3ms | ActiveRecord: 1.2ms)


Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:36:45 -0200
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", true]]
Completed 200 OK in 20ms (Views: 0.3ms | ActiveRecord: 0.7ms)


Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:43:07 -0200
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", true]]
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 1.3ms)


Started GET "/reports/non-infected" for 127.0.0.1 at 2017-01-02 13:43:14 -0200
Processing by ReportsController#show_non_infected_rate as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", false]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 1.5ms)


Started GET "/reports/infected" for 127.0.0.1 at 2017-01-02 13:43:24 -0200
Processing by ReportsController#show_infected_rate as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", true]]
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 1.0ms)


Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 13:52:33 -0200
  
AbstractController::ActionNotFound (The action 'show_averages' could not be found for ReportsController):
  
actionpack (5.0.1) lib/abstract_controller/base.rb:121:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 13:52:51 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
Completed 500 Internal Server Error in 24ms (ActiveRecord: 4.4ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column items.name does not exist
LINE 1: SELECT COUNT("items"."id") FROM "items" WHERE "items"."name"...
                                                      ^
: SELECT COUNT("items"."id") FROM "items" WHERE "items"."name" = $1):
  
app/models/resource.rb:5:in `averages'
app/controllers/reports_controller.rb:14:in `show_resources_averages'
Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 13:56:51 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
Completed 500 Internal Server Error in 25ms (ActiveRecord: 4.1ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column items.name does not exist
LINE 1: SELECT COUNT("items"."id") FROM "items" WHERE "items"."name"...
                                                      ^
: SELECT COUNT("items"."id") FROM "items" WHERE "items"."name" = $1):
  
app/models/resource.rb:5:in `averages'
app/controllers/reports_controller.rb:14:in `show_resources_averages'
Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 13:57:07 -0200
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT SUM() FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resource"."name" = $1[0m  [["name", :food]]
Completed 500 Internal Server Error in 132321ms (ActiveRecord: 11.3ms)


  
ActiveRecord::ConfigurationError (Can't join 'Item' to association named 'resources'; perhaps you misspelled it?):
  
app/models/resource.rb:7:in `averages'
app/controllers/reports_controller.rb:14:in `show_resources_averages'
Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 13:59:36 -0200
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resource"."name" = $1[0m  [["name", :food]]
Completed 500 Internal Server Error in 193409ms (ActiveRecord: 1.8ms)


  
ActiveRecord::ConfigurationError (Can't join 'Item' to association named 'resources'; perhaps you misspelled it?):
  
Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 14:02:56 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :water]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :food]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :ammunation]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :medication]]
Completed 200 OK in 47ms (Views: 0.5ms | ActiveRecord: 11.3ms)


Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 14:06:18 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", false]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :water]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :food]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :ammunation]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :medication]]
Completed 500 Internal Server Error in 79ms (ActiveRecord: 11.4ms)


  
NameError (undefined local variable or method `number_of_survivors' for #<Class:0x007f9d1010e6e0>):
  
app/models/resource.rb:12:in `averages'
app/controllers/reports_controller.rb:14:in `show_resources_averages'
Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 14:06:20 -0200
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", false]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :water]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :food]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :ammunation]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :medication]]
Completed 500 Internal Server Error in 52ms (ActiveRecord: 5.0ms)


  
NameError (undefined local variable or method `number_of_survivors' for #<Class:0x007f9d1010e6e0>):
  
app/models/resource.rb:12:in `averages'
app/controllers/reports_controller.rb:14:in `show_resources_averages'
Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 14:07:09 -0200
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", false]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :water]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :food]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :ammunation]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :medication]]
Completed 500 Internal Server Error in 56ms (ActiveRecord: 2.8ms)


  
NameError (undefined local variable or method `number_of_survivors' for #<Class:0x00000003bee828>):
  
app/models/resource.rb:12:in `averages'
app/controllers/reports_controller.rb:14:in `show_resources_averages'
Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 14:07:45 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", false]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :water]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :food]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :ammunation]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :medication]]
Completed 200 OK in 49ms (Views: 0.3ms | ActiveRecord: 12.2ms)


Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 14:08:58 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", false]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" INNER JOIN "survivors" ON "survivors"."id" = "items"."survivor_id" WHERE "resources"."name" = $1 AND "survivors"."infected" = $2[0m  [["name", :water], ["infected", false]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :food]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :ammunation]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" WHERE "resources"."name" = $1[0m  [["name", :medication]]
Completed 200 OK in 54ms (Views: 0.3ms | ActiveRecord: 12.8ms)


Started GET "/reports/resources_averages" for 127.0.0.1 at 2017-01-02 14:10:37 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_resources_averages as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", false]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" INNER JOIN "survivors" ON "survivors"."id" = "items"."survivor_id" WHERE "resources"."name" = $1 AND "survivors"."infected" = $2[0m  [["name", :water], ["infected", false]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" INNER JOIN "survivors" ON "survivors"."id" = "items"."survivor_id" WHERE "resources"."name" = $1 AND "survivors"."infected" = $2[0m  [["name", :food], ["infected", false]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" INNER JOIN "survivors" ON "survivors"."id" = "items"."survivor_id" WHERE "resources"."name" = $1 AND "survivors"."infected" = $2[0m  [["name", :ammunation], ["infected", false]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT SUM("items"."quantity") FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" INNER JOIN "survivors" ON "survivors"."id" = "items"."survivor_id" WHERE "resources"."name" = $1 AND "survivors"."infected" = $2[0m  [["name", :medication], ["infected", false]]
Completed 200 OK in 55ms (Views: 0.4ms | ActiveRecord: 13.6ms)


Started GET "/reports/points_lost" for 127.0.0.1 at 2017-01-02 14:16:31 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  
SyntaxError (/home/hadutes/zssn/app/controllers/reports_controller.rb:19: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/controllers/reports_controller.rb:19: syntax error, unexpected end-of-input, expecting keyword_end
Started GET "/reports/points_lost" for 127.0.0.1 at 2017-01-02 14:17:15 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ReportsController#show_points_lost_by_infection as */*
  Parameters: {"report"=>{}}
  [1m[35m (1.2ms)[0m  [1m[34mSELECT SUM(points * quantity) FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" INNER JOIN "survivors" ON "survivors"."id" = "items"."survivor_id" WHERE "survivors"."infected" = $1[0m  [["infected", true]]
Completed 200 OK in 41ms (Views: 0.3ms | ActiveRecord: 7.8ms)


Started GET "/reports/points_lost" for 127.0.0.1 at 2017-01-02 14:18:59 -0200
Processing by ReportsController#show_points_lost_by_infection as */*
  Parameters: {"report"=>{}}
  [1m[35m (1.0ms)[0m  [1m[34mSELECT SUM(points * quantity) FROM "items" INNER JOIN "resources" ON "resources"."id" = "items"."resource_id" INNER JOIN "survivors" ON "survivors"."id" = "items"."survivor_id" WHERE "survivors"."infected" = $1[0m  [["infected", true]]
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started GET "/infection_reports" for 127.0.0.1 at 2017-01-02 14:22:01 -0200
  
ActionController::RoutingError (No route matches [GET] "/infection_reports"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started GET "/infection_reports" for 127.0.0.1 at 2017-01-02 14:22:29 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by InfectionReportsController#index as */*
  Parameters: {"infection_report"=>{}}
  [1m[36mInfectionReport Load (0.5ms)[0m  [1m[34mSELECT "infection_reports".* FROM "infection_reports"[0m
Completed 200 OK in 12ms (Views: 8.8ms | ActiveRecord: 4.8ms)


Started GET "/resources" for 127.0.0.1 at 2017-01-02 14:26:22 -0200
Processing by ResourcesController#index as */*
  Parameters: {"resource"=>{}}
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources"[0m
Completed 200 OK in 16ms (Views: 12.7ms | ActiveRecord: 9.3ms)


Started DELETE "/resources/1" for 127.0.0.1 at 2017-01-02 14:27:47 -0200
Processing by ResourcesController#destroy as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"water"=>1}, "items_to_receive"=>{"food"=>1, "ammunation"=>1}}, "id"=>"1", "resource"=>{}}
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.0ms)[0m  [1m[31mDELETE FROM "resources" WHERE "resources"."id" = $1[0m  [["id", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 16ms (ActiveRecord: 4.4ms)


  
ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  update or delete on table "resources" violates foreign key constraint "fk_rails_a57f853ade" on table "items"
DETAIL:  Key (id)=(1) is still referenced from table "items".
: DELETE FROM "resources" WHERE "resources"."id" = $1):
  
app/controllers/resources_controller.rb:38:in `destroy'
Started POST "/resources" for 127.0.0.1 at 2017-01-02 14:28:51 -0200
Processing by ResourcesController#create as */*
  Parameters: {"resource"=>{"name"=>"gold", "points"=>10, "code"=>5}}
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (35.3ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "gold"], ["points", 10], ["code", 5], ["created_at", 2017-01-02 16:28:51 UTC], ["updated_at", 2017-01-02 16:28:51 UTC]]
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
Completed 201 Created in 52ms (Views: 1.5ms | ActiveRecord: 44.3ms)


Started DELETE "/resources/5" for 127.0.0.1 at 2017-01-02 14:29:27 -0200
Processing by ResourcesController#destroy as */*
  Parameters: {"resource"=>{"name"=>"gold", "points"=>10, "code"=>5}, "id"=>"5"}
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  [1m[31mDELETE FROM "resources" WHERE "resources"."id" = $1[0m  [["id", 5]]
  [1m[35m (19.3ms)[0m  [1m[35mCOMMIT[0m
Completed 204 No Content in 27ms (ActiveRecord: 21.2ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started GET "/resources" for 127.0.0.1 at 2017-01-02 14:48:30 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by ResourcesController#index as */*
  Parameters: {"resource"=>{}}
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT "resources".* FROM "resources"[0m
Completed 200 OK in 11ms (Views: 7.8ms | ActiveRecord: 4.8ms)


Started GET "/reports/non-infected" for 127.0.0.1 at 2017-01-02 14:48:40 -0200
Processing by ReportsController#show_non_infected_rate as */*
  Parameters: {"report"=>{}}
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT("survivors"."id") FROM "survivors" WHERE "survivors"."infected" = $1[0m  [["infected", false]]
Completed 200 OK in 124ms (Views: 0.2ms | ActiveRecord: 6.0ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 14:51:49 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (115.08ms)
Completed 200 OK in 141ms (Views: 133.4ms | ActiveRecord: 9.0ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 14:52:36 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers]   [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (46.55ms)
Completed 200 OK in 62ms (Views: 59.5ms | ActiveRecord: 2.0ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 14:52:48 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (2.0ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.8ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers]   [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (31.61ms)
Completed 200 OK in 38ms (Views: 32.9ms | ActiveRecord: 4.4ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 14:53:25 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (46.16ms)
Completed 200 OK in 59ms (Views: 51.6ms | ActiveRecord: 10.3ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 14:53:34 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 5, resource_id: 2, survivor_id: 3, quantity: 15, created_at: "2017-01-02 13:39:05", updated_at: "2017-01-02 14:43:28">
[active_model_serializers] No serializer found for resource: #<Item id: 2, resource_id: 1, survivor_id: 2, quantity: 4, created_at: "2017-01-02 13:39:01", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] No serializer found for resource: #<Item id: 1, resource_id: 1, survivor_id: 1, quantity: 8, created_at: "2017-01-02 13:38:50", updated_at: "2017-01-02 15:03:06">
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (37.14ms)
Completed 200 OK in 50ms (Views: 48.2ms | ActiveRecord: 1.4ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 14:56:23 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (51.34ms)
Completed 200 OK in 75ms (Views: 66.4ms | ActiveRecord: 9.1ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 15:01:22 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.97ms)
Completed 200 OK in 25ms (Views: 21.6ms | ActiveRecord: 5.7ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 15:01:25 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (0.88ms)
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 0.7ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 15:02:06 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (52.98ms)
Completed 200 OK in 77ms (Views: 69.8ms | ActiveRecord: 9.9ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 15:05:30 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (65.91ms)
Completed 200 OK in 79ms (Views: 71.4ms | ActiveRecord: 6.6ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 15:06:39 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (87.54ms)
Completed 200 OK in 110ms (Views: 97.1ms | ActiveRecord: 16.2ms)


Started GET "/survivors/1" for 127.0.0.1 at 2017-01-02 15:07:41 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 0.5ms | ActiveRecord: 0.3ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started GET "/survivors/1" for 127.0.0.1 at 2017-01-02 15:08:23 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 6.4ms)


Started GET "/survivors/1" for 127.0.0.1 at 2017-01-02 15:08:26 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.9ms)


Started GET "/survivors/1" for 127.0.0.1 at 2017-01-02 15:08:38 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (75.19ms)
Completed 200 OK in 100ms (Views: 80.7ms | ActiveRecord: 7.8ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:13:22 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:13:22 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:13:22 UTC], ["id", 9]]
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:13:22 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:13:22 UTC], ["id", 5]]
  [1m[35m (14.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.33ms)
Completed 200 OK in 129ms (Views: 32.8ms | ActiveRecord: 24.5ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:13:53 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:13:53 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:13:53 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:13:53 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:13:53 UTC], ["id", 5]]
  [1m[35m (62.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (21.12ms)
Completed 500 Internal Server Error in 156ms (ActiveRecord: 70.6ms)


  
NoMethodError (undefined method `items.resource.name' for #<Survivor:0x00000004ecb518>):
  
app/controllers/survivors_controller.rb:46:in `trade'
Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:14:32 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.1ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:14:32 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.0ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:14:32 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:14:32 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:14:32 UTC], ["id", 5]]
  [1m[35m (54.6ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.13ms)
Completed 200 OK in 147ms (Views: 4.1ms | ActiveRecord: 67.0ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:17:22 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:17:22 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:17:22 UTC], ["id", 9]]
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:17:22 UTC], ["id", 5]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:17:22 UTC], ["id", 5]]
  [1m[35m (38.9ms)[0m  [1m[35mCOMMIT[0m
Completed 500 Internal Server Error in 150ms (ActiveRecord: 47.9ms)


  
NoMethodError (undefined method `items.resource.name' for #<Survivor:0x00000004669a00>):
  
app/controllers/survivors_controller.rb:46:in `trade'
DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:19:35 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:19:35 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:19:35 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:19:35 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:19:35 UTC], ["id", 5]]
  [1m[35m (18.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.46ms)
Completed 200 OK in 137ms (Views: 5.8ms | ActiveRecord: 38.0ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:25:56 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:25:57 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:25:57 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:25:57 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:25:57 UTC], ["id", 5]]
  [1m[35m (18.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (1.5ms)
Completed 200 OK in 143ms (Views: 6.6ms | ActiveRecord: 37.4ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:31:07 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (1.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:31:17 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:31:17 UTC], ["id", 9]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:31:17 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:31:17 UTC], ["id", 5]]
  [1m[35m (20.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.73ms)
Completed 200 OK in 121ms (Views: 4.7ms | ActiveRecord: 30.5ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:32:13 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:32:14 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:32:14 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (1.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:32:14 UTC], ["id", 5]]
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:32:14 UTC], ["id", 5]]
  [1m[35m (49.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.47ms)
Completed 200 OK in 150ms (Views: 3.2ms | ActiveRecord: 64.1ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 15:32:40 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 17:32:40 UTC], ["id", 9]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 17:32:40 UTC], ["id", 9]]
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 17:32:40 UTC], ["id", 5]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 17:32:40 UTC], ["id", 5]]
  [1m[35m (54.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.46ms)
Completed 200 OK in 162ms (Views: 3.4ms | ActiveRecord: 65.1ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 15:32:54 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (1.0ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (43.71ms)
Completed 200 OK in 69ms (Views: 63.6ms | ActiveRecord: 5.2ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-02 15:33:53 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "items"=>{"food"=>5, "medication"=>7, "gold"=>7, "water"=>2}}}
Unpermitted parameter: items
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (33.6ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "costinha"], ["age", 25], ["gender", "F"], ["last_location_longitude", #<BigDecimal:423acb8,'0.43E1',18(36)>], ["last_location_latitude", #<BigDecimal:423af60,'-0.1E1',9(36)>], ["created_at", 2017-01-02 17:33:53 UTC], ["updated_at", 2017-01-02 17:33:53 UTC]]
  [1m[35m (10.2ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameter: gold
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 4], ["quantity", 2], ["created_at", 2017-01-02 17:33:54 UTC], ["updated_at", 2017-01-02 17:33:54 UTC]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 4], ["quantity", 5], ["created_at", 2017-01-02 17:33:54 UTC], ["updated_at", 2017-01-02 17:33:54 UTC]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 3], ["survivor_id", 4], ["quantity", 7], ["created_at", 2017-01-02 17:33:54 UTC], ["updated_at", 2017-01-02 17:33:54 UTC]]
  [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (18.82ms)
Completed 201 Created in 142ms (Views: 20.2ms | ActiveRecord: 75.9ms)


Started PUT "/survivors" for 127.0.0.1 at 2017-01-02 15:34:46 -0200
  
ActionController::RoutingError (No route matches [PUT] "/survivors"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
rack-cors (0.4.0) lib/rack/cors.rb:80:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{
  "survivor":{
  "name":"costinha",
  "age":25,
  "gender":"F",
  "last_location_latitude":-1.0,
  "last_location_longitude":4.3,
    "infected":true 
    
}
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 15:35:09 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (51.27ms)
Completed 200 OK in 55ms (Views: 50.2ms | ActiveRecord: 3.8ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:35:25 -0200
Error occurred while parsing request parameters.
Contents:

{
  "survivor":{
  "name":"costinha",
  "age":25,
  "gender":"F",
  "last_location_latitude":-1.0,
  "last_location_longitude":4.3,
    "infected":true 
    
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{
  "survivor":{
  "name":"costinha",
  "age":25,
  "gender":"F",
  "last_location_latitude":-1.0,
  "last_location_longitude":4.3,
    "infected":true 
    
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack-attack (5.0.1) lib/rack/attack.rb:140:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
rack-cors (0.4.0) lib/rack/cors.rb:80:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:35:43 -0200
Error occurred while parsing request parameters.
Contents:

{
  "survivor":{
  "name":"costinha",
  "age":25,
  "gender":"F",
  "last_location_latitude":-1.0,
  "last_location_longitude":4.3,
  
    
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{
  "survivor":{
  "name":"costinha",
  "age":25,
  "gender":"F",
  "last_location_latitude":-1.0,
  "last_location_longitude":4.3,
  
    
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack-attack (5.0.1) lib/rack/attack.rb:140:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
rack-cors (0.4.0) lib/rack/cors.rb:80:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:31 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3}, "id"=>"4"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (12.18ms)
Completed 200 OK in 18ms (Views: 10.6ms | ActiveRecord: 3.1ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:50 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (14.04ms)
Completed 200 OK in 21ms (Views: 14.1ms | ActiveRecord: 2.4ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:51 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (17.48ms)
Completed 200 OK in 27ms (Views: 16.4ms | ActiveRecord: 3.9ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:52 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (1.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (28.22ms)
Completed 200 OK in 35ms (Views: 26.2ms | ActiveRecord: 4.4ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:52 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (13.56ms)
Completed 200 OK in 23ms (Views: 13.1ms | ActiveRecord: 2.6ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:53 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (18.46ms)
Completed 200 OK in 25ms (Views: 18.0ms | ActiveRecord: 2.2ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:53 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (1.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (16.06ms)
Completed 200 OK in 25ms (Views: 15.6ms | ActiveRecord: 3.4ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:53 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (1.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (20.39ms)
Completed 200 OK in 26ms (Views: 17.3ms | ActiveRecord: 4.9ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:53 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (1.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (18.78ms)
Completed 200 OK in 40ms (Views: 17.2ms | ActiveRecord: 4.0ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:53 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (17.96ms)
Completed 200 OK in 23ms (Views: 17.3ms | ActiveRecord: 2.4ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:54 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (16.19ms)
Completed 200 OK in 26ms (Views: 14.8ms | ActiveRecord: 7.0ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:54 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (17.72ms)
Completed 200 OK in 23ms (Views: 16.9ms | ActiveRecord: 2.4ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:56 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (20.01ms)
Completed 200 OK in 27ms (Views: 19.4ms | ActiveRecord: 2.9ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 15:36:57 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (15.17ms)
Completed 200 OK in 20ms (Views: 14.3ms | ActiveRecord: 2.6ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 15:37:04 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (1.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.5ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (61.53ms)
Completed 200 OK in 66ms (Views: 60.5ms | ActiveRecord: 5.3ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started GET "/survivors" for 127.0.0.1 at 2017-01-02 18:16:10 -0200
  [1m[36mActiveRecord::SchemaMigration Load (77.9ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (38.0ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (81.8ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (33.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (516.83ms)
Completed 200 OK in 1160ms (Views: 689.7ms | ActiveRecord: 776.5ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-02 18:17:34 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (52.54ms)
Completed 200 OK in 58ms (Views: 52.0ms | ActiveRecord: 5.0ms)


Started PUT "/survivors/4" for 127.0.0.1 at 2017-01-02 18:17:40 -0200
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"name"=>"costinha", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "infected"=>true}, "id"=>"4"}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Unpermitted parameter: infected
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.7ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 4]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (14.84ms)
Completed 200 OK in 27ms (Views: 13.2ms | ActiveRecord: 3.8ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 18:17:47 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>3, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (17.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (199.8ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 1], ["updated_at", 2017-01-02 20:17:48 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (9.6ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 2], ["updated_at", 2017-01-02 20:17:48 UTC], ["id", 9]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 14], ["updated_at", 2017-01-02 20:17:48 UTC], ["id", 5]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 2], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "items" SET "quantity" = $1, "updated_at" = $2 WHERE "items"."id" = $3[0m  [["quantity", 15], ["updated_at", 2017-01-02 20:17:48 UTC], ["id", 5]]
  [1m[35m (38.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.7ms)
Completed 200 OK in 376ms (Views: 29.3ms | ActiveRecord: 274.2ms)


Started POST "/survivors/1/trade" for 127.0.0.1 at 2017-01-02 18:17:55 -0200
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>2, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"food"=>1}}, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.7ms)


  
RuntimeError (Infected survivor julia cannot trade!):
  
app/models/survivor.rb:10:in `block in exchange_between_survivors'
app/models/survivor.rb:9:in `each'
app/models/survivor.rb:9:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started GET "/survivors/1" for 127.0.0.1 at 2017-01-02 18:18:10 -0200
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mItem Load (0.6ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (13.46ms)
Completed 200 OK in 18ms (Views: 13.0ms | ActiveRecord: 2.3ms)


DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
DEPRECATION WARNING: Passing strings or symbols to the middleware builder is deprecated, please change
them to actual class references.  For example:

  "Rack::Cors" => Rack::Cors

 (called from <top (required)> at /home/hadutes/zssn/config/environment.rb:5)
Started POST "/survivors" for 127.0.0.1 at 2017-01-03 01:45:23 -0200
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"costinha2", "age"=>25, "gender"=>"Fa", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "items"=>{"food"=>5, "medication"=>7, "gold"=>7, "water"=>2}}}
Unpermitted parameter: items
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.15ms)
Completed 422 Unprocessable Entity in 294ms (Views: 40.6ms | ActiveRecord: 236.4ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-03 01:45:39 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"costinha2", "age"=>25, "gender"=>"F", "last_location_latitude"=>-1.0, "last_location_longitude"=>4.3, "items"=>{"food"=>5, "medication"=>7, "gold"=>7, "water"=>2}}}
Unpermitted parameter: items
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (20.4ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "costinha2"], ["age", 25], ["gender", "F"], ["last_location_longitude", #<BigDecimal:4553a58,'0.43E1',18(36)>], ["last_location_latitude", #<BigDecimal:4553c38,'-0.1E1',9(36)>], ["created_at", 2017-01-03 03:45:39 UTC], ["updated_at", 2017-01-03 03:45:39 UTC]]
  [1m[35m (88.9ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameter: gold
Unpermitted parameters: name, age, gender, last_location_latitude, last_location_longitude
  [1m[36mResource Load (84.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (228.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 5], ["quantity", 2], ["created_at", 2017-01-03 03:45:39 UTC], ["updated_at", 2017-01-03 03:45:39 UTC]]
  [1m[35m (98.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 2], ["survivor_id", 5], ["quantity", 5], ["created_at", 2017-01-03 03:45:40 UTC], ["updated_at", 2017-01-03 03:45:40 UTC]]
  [1m[35m (64.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "medication"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 3], ["survivor_id", 5], ["quantity", 7], ["created_at", 2017-01-03 03:45:40 UTC], ["updated_at", 2017-01-03 03:45:40 UTC]]
  [1m[35m (40.3ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.4ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 5]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (1.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (50.68ms)
Completed 201 Created in 858ms (Views: 99.9ms | ActiveRecord: 640.4ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 02:07:48 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>2, "id"=>"1", "survivor"=>{"infected"=>2}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (30.0ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 04:07:48 UTC], ["updated_at", 2017-01-03 04:07:48 UTC]]
  [1m[35m (19.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.53ms)
Completed 200 OK in 128ms (Views: 8.9ms | ActiveRecord: 58.0ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 02:08:08 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>2, "id"=>"1", "survivor"=>{"infected"=>2}}
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 04:08:08 UTC], ["updated_at", 2017-01-03 04:08:08 UTC]]
  [1m[35m (50.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.59ms)
Completed 200 OK in 70ms (Views: 1.5ms | ActiveRecord: 56.8ms)


Started POST "/survivors/3/trade" for 127.0.0.1 at 2017-01-03 10:25:00 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#trade as */*
  Parameters: {"trade"=>{"survivor_id"=>4, "items_to_give"=>{"food"=>1}, "items_to_receive"=>{"medication"=>1}}, "id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "food"], ["LIMIT", 1]]
  [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT  "items".* FROM "items" WHERE "items"."resource_id" = $1 AND "items"."survivor_id" = $2 LIMIT $3[0m  [["resource_id", 30], ["survivor_id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 24ms (ActiveRecord: 6.3ms)


  
RuntimeError (Survivor lucrecia4 have only 0 food to trade.):
  
app/models/survivor.rb:35:in `block in give'
app/models/survivor.rb:31:in `give'
app/models/survivor.rb:22:in `trade'
app/models/survivor.rb:16:in `block in exchange_between_survivors'
app/models/survivor.rb:15:in `exchange_between_survivors'
app/controllers/survivors_controller.rb:18:in `trade'
Started POST "/survivors" for 127.0.0.1 at 2017-01-03 10:25:21 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas3", "age"=>"25", "gender"=>"Male", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameters: infected, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.07ms)
Completed 422 Unprocessable Entity in 133ms (Views: 3.0ms | ActiveRecord: 0.3ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-03 10:25:30 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas3", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameters: infected, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (9.7ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "lucas3"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:439fba8,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:439fc70,'0.20005E1',18(18)>], ["created_at", 2017-01-03 12:25:30 UTC], ["updated_at", 2017-01-03 12:25:30 UTC]]
  [1m[35m (39.3ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 29], ["survivor_id", 8], ["quantity", 4], ["created_at", 2017-01-03 12:25:30 UTC], ["updated_at", 2017-01-03 12:25:30 UTC]]
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 8]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (53.31ms)
Completed 201 Created in 128ms (Views: 59.1ms | ActiveRecord: 59.8ms)


  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (28.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[35m (5008.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "zssn_dev"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", :environment]]
  [1m[35m (332.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "zssn_dev"[0m
  [1m[35m (215.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "zssn_test"[0m
  [1m[35m (691.0ms)[0m  [1m[35mCREATE DATABASE "zssn_dev" ENCODING = 'unicode'[0m
  [1m[35m (531.8ms)[0m  [1m[35mCREATE DATABASE "zssn_test" ENCODING = 'unicode'[0m
  [1m[35m (105.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying PRIMARY KEY)[0m
  [1m[35m (83.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(2888816078766201675);[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSurvivors (20161226132148)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (72.9ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" serial primary key, "name" character varying NOT NULL, "age" integer NOT NULL, "gender" character varying NOT NULL, "last_location_longitude" decimal NOT NULL, "last_location_latitude" decimal NOT NULL, "infected" boolean DEFAULT 'f' NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226132148"]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateResources (20161226133625)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (70.0ms)[0m  [1m[35mCREATE TABLE "resources" ("id" serial primary key, "name" character varying, "points" integer, "code" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226133625"]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateItems (20161226133648)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (49.2ms)[0m  [1m[35mCREATE TABLE "items" ("id" serial primary key, "resource_id" integer, "survivor_id" integer, "quantity" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_a57f853ade"
FOREIGN KEY ("resource_id")
  REFERENCES "resources" ("id")
, CONSTRAINT "fk_rails_27c1602cf3"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  [1m[35m (36.1ms)[0m  [1m[35mCREATE  INDEX  "index_items_on_resource_id" ON "items"  ("resource_id")[0m
  [1m[35m (49.5ms)[0m  [1m[35mCREATE  INDEX  "index_items_on_survivor_id" ON "items"  ("survivor_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226133648"]]
  [1m[35m (11.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateInfectionReports (20161226134216)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (46.4ms)[0m  [1m[35mCREATE TABLE "infection_reports" ("id" serial primary key, "reporter_survivor_id" integer NOT NULL, "reported_survivor_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226134216"]]
  [1m[35m (18.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to PopulateResources (20161226170822)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "water"], ["points", 4], ["code", 4], ["created_at", 2017-01-03 12:27:04 UTC], ["updated_at", 2017-01-03 12:27:04 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "food"], ["points", 3], ["code", 3], ["created_at", 2017-01-03 12:27:04 UTC], ["updated_at", 2017-01-03 12:27:04 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "medication"], ["points", 2], ["code", 2], ["created_at", 2017-01-03 12:27:04 UTC], ["updated_at", 2017-01-03 12:27:04 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("name", "points", "code", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "ammunation"], ["points", 1], ["code", 1], ["created_at", 2017-01-03 12:27:04 UTC], ["updated_at", 2017-01-03 12:27:04 UTC]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20161226170822"]]
  [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", :environment], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", 2017-01-03 12:27:04 UTC], ["updated_at", 2017-01-03 12:27:04 UTC]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(2888816078766201675)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Started POST "/survivors" for 127.0.0.1 at 2017-01-03 10:27:14 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas3", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameters: infected, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "lucas3"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:5509bc8,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:5509ce0,'0.20005E1',18(18)>], ["created_at", 2017-01-03 12:27:14 UTC], ["updated_at", 2017-01-03 12:27:14 UTC]]
  [1m[35m (16.0ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 1], ["quantity", 4], ["created_at", 2017-01-03 12:27:14 UTC], ["updated_at", 2017-01-03 12:27:14 UTC]]
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (9.68ms)
Completed 201 Created in 66ms (Views: 14.6ms | ActiveRecord: 30.3ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-03 12:39:19 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"lucas3", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-1.0000", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameters: infected, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "lucas3"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:43c35d0,'-0.1E1',9(18)>], ["last_location_latitude", #<BigDecimal:43c3710,'0.20005E1',18(18)>], ["created_at", 2017-01-03 14:39:20 UTC], ["updated_at", 2017-01-03 14:39:20 UTC]]
  [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 2], ["quantity", 4], ["created_at", 2017-01-03 14:39:20 UTC], ["updated_at", 2017-01-03 14:39:20 UTC]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (9.92ms)
Completed 201 Created in 61ms (Views: 15.3ms | ActiveRecord: 23.9ms)


Started GET "/survivors" for 127.0.0.1 at 2017-01-03 12:39:25 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (4.98ms)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 1.0ms)


Started GET "/" for 127.0.0.1 at 2017-01-03 15:15:29 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (28.94ms)
Completed 200 OK in 39ms (Views: 34.0ms | ActiveRecord: 6.1ms)


Started GET "/" for 127.0.0.1 at 2017-01-03 15:15:30 -0200
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mItem Load (0.1ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (6.0ms)
Completed 200 OK in 8ms (Views: 6.5ms | ActiveRecord: 1.2ms)


Started GET "/" for 127.0.0.1 at 2017-01-03 15:15:38 -0200
Processing by SurvivorsController#index as HTML
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
[active_model_serializers]   [1m[36mItem Load (0.3ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 1]]
[active_model_serializers]   [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 2]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (6.62ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.8ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2017-01-03 15:15:39 -0200
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
rack-cors (0.4.0) lib/rack/cors.rb:80:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 16:08:39 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected"=>"1", "id"=>"1", "survivor"=>{"infected"=>"1"}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: infected, id, survivor
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
Completed 500 Internal Server Error in 22ms (ActiveRecord: 4.3ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/models/infection_report.rb:9:in `save_and_verify_occurrences'
app/models/survivor.rb:65:in `report_infection'
app/controllers/survivors_controller.rb:43:in `report_infection'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 16:08:46 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>"1", "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (23.8ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 1], ["created_at", 2017-01-03 18:08:46 UTC], ["updated_at", 2017-01-03 18:08:46 UTC]]
  [1m[35m (29.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.29ms)
Completed 200 OK in 63ms (Views: 3.7ms | ActiveRecord: 54.8ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:27:15 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.13ms)
Completed 200 OK in 30ms (Views: 3.0ms | ActiveRecord: 4.5ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:27:51 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.11ms)
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 1.1ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:28:07 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 19:28:07 UTC], ["updated_at", 2017-01-03 19:28:07 UTC]]
  [1m[35m (10.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.29ms)
Completed 200 OK in 18ms (Views: 0.7ms | ActiveRecord: 12.0ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:28:11 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.12ms)
Completed 200 OK in 6ms (Views: 0.4ms | ActiveRecord: 1.3ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-03 17:29:32 -0200
Error occurred while parsing request parameters.
Contents:

{
"survivor":{
    "name":"caio",
    "age":"25",
"gender":"M"

"last_location_latitude":"2.0005",
"infected":false,
		"items":{
"water":"4"
		}
	}
}
  
ActionDispatch::ParamsParser::ParseError (822: unexpected token at '{
"survivor":{
    "name":"caio",
    "age":"25",
"gender":"M"

"last_location_latitude":"2.0005",
"infected":false,
		"items":{
"water":"4"
		}
	}
}'):
  
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:78:in `rescue in parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/parameters.rb:72:in `parse_formatted_parameters'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:354:in `block in POST'
rack (2.0.1) lib/rack/request.rb:57:in `fetch'
rack (2.0.1) lib/rack/request.rb:57:in `fetch_header'
actionpack (5.0.1) lib/action_dispatch/http/request.rb:353:in `POST'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:282:in `_wrapper_enabled?'
actionpack (5.0.1) lib/action_controller/metal/params_wrapper.rb:231:in `process_action'
activerecord (5.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (5.0.1) lib/abstract_controller/base.rb:126:in `process'
actionpack (5.0.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (5.0.1) lib/action_controller/metal.rb:262:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `each'
actionpack (5.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'
actionpack (5.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'
rack-attack (5.0.1) lib/rack/attack.rb:140:in `call'
rack (2.0.1) lib/rack/etag.rb:25:in `call'
rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.1) lib/rack/head.rb:12:in `call'
activerecord (5.0.1) lib/active_record/migration.rb:553:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.1) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.1) lib/rack/sendfile.rb:111:in `call'
rack-cors (0.4.0) lib/rack/cors.rb:80:in `call'
railties (5.0.1) lib/rails/engine.rb:522:in `call'
puma (3.6.2) lib/puma/configuration.rb:225:in `call'
puma (3.6.2) lib/puma/server.rb:578:in `handle_request'
puma (3.6.2) lib/puma/server.rb:415:in `process_client'
puma (3.6.2) lib/puma/server.rb:275:in `block in run'
puma (3.6.2) lib/puma/thread_pool.rb:116:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2017-01-03 17:29:47 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"caio", "age"=>"25", "gender"=>"M", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameters: infected, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.07ms)
Completed 422 Unprocessable Entity in 4ms (Views: 1.4ms | ActiveRecord: 0.2ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:31:30 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.16ms)
Completed 200 OK in 30ms (Views: 3.1ms | ActiveRecord: 5.1ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:33:10 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.07ms)
Completed 422 Unprocessable Entity in 27ms (Views: 2.1ms | ActiveRecord: 4.0ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:33:19 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 19:33:19 UTC], ["updated_at", 2017-01-03 19:33:19 UTC]]
  [1m[35m (29.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.05ms)
Completed 422 Unprocessable Entity in 36ms (Views: 0.4ms | ActiveRecord: 31.2ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:33:23 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.06ms)
Completed 422 Unprocessable Entity in 6ms (Views: 0.4ms | ActiveRecord: 1.5ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:34:27 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 19:34:27 UTC], ["updated_at", 2017-01-03 19:34:27 UTC]]
  [1m[35m (128.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.05ms)
Completed 500 Internal Server Error in 156ms (Views: 2.4ms | ActiveRecord: 133.2ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/survivors_controller.rb:48:in `report_infection'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:34:33 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.06ms)
Completed 500 Internal Server Error in 10ms (Views: 0.4ms | ActiveRecord: 1.4ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/survivors_controller.rb:48:in `report_infection'
Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:34:51 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.07ms)
Completed 422 Unprocessable Entity in 24ms (Views: 1.7ms | ActiveRecord: 1.2ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:35:10 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 19:35:10 UTC], ["updated_at", 2017-01-03 19:35:10 UTC]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.04ms)
Completed 422 Unprocessable Entity in 19ms (Views: 0.3ms | ActiveRecord: 13.1ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:35:30 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 19:35:31 UTC], ["updated_at", 2017-01-03 19:35:31 UTC]]
  [1m[35m (17.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.07ms)
Completed 422 Unprocessable Entity in 45ms (Views: 2.4ms | ActiveRecord: 22.4ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:36:46 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 19:36:47 UTC], ["updated_at", 2017-01-03 19:36:47 UTC]]
  [1m[35m (12.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[36mInfectionReport Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND ("infection_reports"."id" != $2) AND "infection_reports"."reporter_survivor_id" = $3 LIMIT $4[0m  [["reported_survivor_id", 2], ["id", 9], ["reporter_survivor_id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.07ms)
Completed 422 Unprocessable Entity in 86913ms (Views: 8.3ms | ActiveRecord: 18.1ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:38:23 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 19:38:23 UTC], ["updated_at", 2017-01-03 19:38:23 UTC]]
  [1m[35m (14.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND ("infection_reports"."id" != $2) AND "infection_reports"."reporter_survivor_id" = $3 LIMIT $4[0m  [["reported_survivor_id", 2], ["id", 10], ["reporter_survivor_id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.34ms)
Completed 200 OK in 45ms (Views: 3.6ms | ActiveRecord: 20.1ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:38:25 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.06ms)
Completed 422 Unprocessable Entity in 9ms (Views: 1.1ms | ActiveRecord: 1.5ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:38:25 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.08ms)
Completed 422 Unprocessable Entity in 8ms (Views: 0.4ms | ActiveRecord: 1.5ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:38:29 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "infection_reports" ("reporter_survivor_id", "reported_survivor_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["reporter_survivor_id", 1], ["reported_survivor_id", 2], ["created_at", 2017-01-03 19:38:29 UTC], ["updated_at", 2017-01-03 19:38:29 UTC]]
  [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[36mInfectionReport Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND ("infection_reports"."id" != $2) AND "infection_reports"."reporter_survivor_id" = $3 LIMIT $4[0m  [["reported_survivor_id", 2], ["id", 11], ["reporter_survivor_id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with InfectionReport (0.41ms)
Completed 200 OK in 21ms (Views: 0.9ms | ActiveRecord: 15.6ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2017-01-03 17:38:31 -0200
Processing by SurvivorsController#report_infection as */*
  Parameters: {"infected_id"=>2, "id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Unpermitted parameters: id, survivor
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mInfectionReport Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT("infection_reports"."id") FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1[0m  [["reported_survivor_id", 2]]
  [1m[36mInfectionReport Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "infection_reports" WHERE "infection_reports"."reported_survivor_id" = $1 AND "infection_reports"."reporter_survivor_id" = $2 LIMIT $3[0m  [["reported_survivor_id", 2], ["reporter_survivor_id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.07ms)
Completed 422 Unprocessable Entity in 7ms (Views: 0.4ms | ActiveRecord: 1.7ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-03 17:40:57 -0200
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"caio", "age"=>"25", "gender"=>"M", "last_location_latitude"=>"2.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameters: infected, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.07ms)
Completed 422 Unprocessable Entity in 12ms (Views: 2.1ms | ActiveRecord: 2.0ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-03 17:41:43 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"caio", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"2.0005", "last_location_latitude"=>"92.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameters: infected, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with ActiveModel::Errors (0.05ms)
Completed 422 Unprocessable Entity in 2ms (Views: 0.4ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2017-01-03 17:41:57 -0200
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"caio", "age"=>"25", "gender"=>"M", "last_location_longitude"=>"-2.0005", "last_location_latitude"=>"82.0005", "infected"=>false, "items"=>{"water"=>"4"}}}
Unpermitted parameters: infected, items
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "last_location_longitude", "last_location_latitude", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "caio"], ["age", 25], ["gender", "M"], ["last_location_longitude", #<BigDecimal:416f040,'-0.20005E1',18(18)>], ["last_location_latitude", #<BigDecimal:416f0e0,'0.820005E2',18(18)>], ["created_at", 2017-01-03 19:41:57 UTC], ["updated_at", 2017-01-03 19:41:57 UTC]]
  [1m[35m (10.4ms)[0m  [1m[35mCOMMIT[0m
Unpermitted parameters: name, age, gender, last_location_longitude, last_location_latitude, infected
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."name" = $1 LIMIT $2[0m  [["name", "water"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "items" ("resource_id", "survivor_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["resource_id", 1], ["survivor_id", 3], ["quantity", 4], ["created_at", 2017-01-03 19:41:57 UTC], ["updated_at", 2017-01-03 19:41:57 UTC]]
  [1m[35m (19.8ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers]   [1m[36mItem Load (0.2ms)[0m  [1m[34mSELECT "items".* FROM "items" WHERE "items"."survivor_id" = $1[0m  [["survivor_id", 3]]
[active_model_serializers]   [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered SurvivorSerializer with ActiveModelSerializers::Adapter::Attributes (11.15ms)
Completed 201 Created in 73ms (Views: 16.5ms | ActiveRecord: 36.2ms)


